var or=Object.defineProperty;var ir=(e,t,n)=>t in e?or(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var w=(e,t,n)=>(ir(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var ne,p,vn,pn,J,Ue,gn,we,at={},mn=[],sr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Te=Array.isArray;function z(e,t){for(var n in t)e[n]=t[n];return e}function yn(e){var t=e.parentNode;t&&t.removeChild(e)}function ar(e,t,n){var r,o,i,s={};for(i in t)i=="key"?r=t[i]:i=="ref"?o=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?ne.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)s[i]===void 0&&(s[i]=e.defaultProps[i]);return zt(e,s,r,o,null)}function zt(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o??++vn};return o==null&&p.vnode!=null&&p.vnode(i),i}function N(e){return e.children}function Mt(e,t){this.props=e,this.context=t}function Tt(e,t){if(t==null)return e.__?Tt(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Tt(e):null}function bn(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return bn(e)}}function ze(e){(!e.__d&&(e.__d=!0)&&J.push(e)&&!Gt.__r++||Ue!==p.debounceRendering)&&((Ue=p.debounceRendering)||gn)(Gt)}function Gt(){var e,t,n,r,o,i,s,l,c;for(J.sort(we);e=J.shift();)e.__d&&(t=J.length,r=void 0,o=void 0,i=void 0,l=(s=(n=e).__v).__e,(c=n.__P)&&(r=[],o=[],(i=z({},s)).__v=s.__v+1,Be(c,s,i,n.__n,c.ownerSVGElement!==void 0,s.__h!=null?[l]:null,r,l??Tt(s),s.__h,o),Fn(r,s,o),s.__e!=l&&bn(s)),J.length>t&&J.sort(we));Gt.__r=0}function In(e,t,n,r,o,i,s,l,c,u,_){var a,g,v,f,d,I,m,y,S,F=0,b=r&&r.__k||mn,x=b.length,k=x,T=t.length;for(n.__k=[],a=0;a<T;a++)(f=n.__k[a]=(f=t[a])==null||typeof f=="boolean"||typeof f=="function"?null:typeof f=="string"||typeof f=="number"||typeof f=="bigint"?zt(null,f,null,null,f):Te(f)?zt(N,{children:f},null,null,null):f.__b>0?zt(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f)!=null?(f.__=n,f.__b=n.__b+1,(y=lr(f,b,m=a+F,k))===-1?v=at:(v=b[y]||at,b[y]=void 0,k--),Be(e,f,v,o,i,s,l,c,u,_),d=f.__e,(g=f.ref)&&v.ref!=g&&(v.ref&&Ee(v.ref,null,f),_.push(g,f.__c||d,f)),d!=null&&(I==null&&(I=d),(S=v===at||v.__v===null)?y==-1&&F--:y!==m&&(y===m+1?F++:y>m?k>T-m?F+=y-m:F--:F=y<m&&y==m-1?y-m:0),m=a+F,typeof f.type!="function"||y===m&&v.__k!==f.__k?typeof f.type=="function"||y===m&&!S?f.__d!==void 0?(c=f.__d,f.__d=void 0):c=d.nextSibling:c=Sn(e,d,c):c=wn(f,c,e),typeof n.type=="function"&&(n.__d=c))):(v=b[a])&&v.key==null&&v.__e&&(v.__e==c&&(c=Tt(v)),Se(v,v,!1));for(n.__e=I,a=x;a--;)b[a]!=null&&(typeof n.type=="function"&&b[a].__e!=null&&b[a].__e==n.__d&&(n.__d=b[a].__e.nextSibling),Se(b[a],b[a]))}function wn(e,t,n){for(var r,o=e.__k,i=0;o&&i<o.length;i++)(r=o[i])&&(r.__=e,t=typeof r.type=="function"?wn(r,t,n):Sn(n,r.__e,t));return t}function Sn(e,t,n){return n==null||n.parentNode!==e?e.insertBefore(t,null):t==n&&t.parentNode!=null||e.insertBefore(t,n),t.nextSibling}function lr(e,t,n,r){var o=e.key,i=e.type,s=n-1,l=n+1,c=t[n];if(c===null||c&&o==c.key&&i===c.type)return n;if(r>(c!=null?1:0))for(;s>=0||l<t.length;){if(s>=0){if((c=t[s])&&o==c.key&&i===c.type)return s;s--}if(l<t.length){if((c=t[l])&&o==c.key&&i===c.type)return l;l++}}return-1}function cr(e,t,n,r,o){var i;for(i in n)i==="children"||i==="key"||i in t||Yt(e,i,null,n[i],r);for(i in t)o&&typeof t[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||n[i]===t[i]||Yt(e,i,t[i],n[i],r)}function Oe(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||sr.test(t)?n:n+"px"}function Yt(e,t,n,r,o){var i;t:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Oe(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Oe(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r||e.addEventListener(t,i?We:qe,i):e.removeEventListener(t,i?We:qe,i);else if(t!=="dangerouslySetInnerHTML"){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t in e)try{e[t]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function qe(e){return this.l[e.type+!1](p.event?p.event(e):e)}function We(e){return this.l[e.type+!0](p.event?p.event(e):e)}function Be(e,t,n,r,o,i,s,l,c,u){var _,a,g,v,f,d,I,m,y,S,F,b,x,k,T,M=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(c=n.__h,l=t.__e=n.__e,t.__h=null,i=[l]),(_=p.__b)&&_(t);t:if(typeof M=="function")try{if(m=t.props,y=(_=M.contextType)&&r[_.__c],S=_?y?y.props.value:_.__:r,n.__c?I=(a=t.__c=n.__c).__=a.__E:("prototype"in M&&M.prototype.render?t.__c=a=new M(m,S):(t.__c=a=new Mt(m,S),a.constructor=M,a.render=fr),y&&y.sub(a),a.props=m,a.state||(a.state={}),a.context=S,a.__n=r,g=a.__d=!0,a.__h=[],a._sb=[]),a.__s==null&&(a.__s=a.state),M.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=z({},a.__s)),z(a.__s,M.getDerivedStateFromProps(m,a.__s))),v=a.props,f=a.state,a.__v=t,g)M.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(M.getDerivedStateFromProps==null&&m!==v&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(m,S),!a.__e&&(a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(m,a.__s,S)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(a.props=m,a.state=a.__s,a.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(P){P&&(P.__=t)}),F=0;F<a._sb.length;F++)a.__h.push(a._sb[F]);a._sb=[],a.__h.length&&s.push(a);break t}a.componentWillUpdate!=null&&a.componentWillUpdate(m,a.__s,S),a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(v,f,d)})}if(a.context=S,a.props=m,a.__P=e,a.__e=!1,b=p.__r,x=0,"prototype"in M&&M.prototype.render){for(a.state=a.__s,a.__d=!1,b&&b(t),_=a.render(a.props,a.state,a.context),k=0;k<a._sb.length;k++)a.__h.push(a._sb[k]);a._sb=[]}else do a.__d=!1,b&&b(t),_=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++x<25);a.state=a.__s,a.getChildContext!=null&&(r=z(z({},r),a.getChildContext())),g||a.getSnapshotBeforeUpdate==null||(d=a.getSnapshotBeforeUpdate(v,f)),In(e,Te(T=_!=null&&_.type===N&&_.key==null?_.props.children:_)?T:[T],t,n,r,o,i,s,l,c,u),a.base=t.__e,t.__h=null,a.__h.length&&s.push(a),I&&(a.__E=a.__=null)}catch(P){t.__v=null,(c||i!=null)&&(t.__e=l,t.__h=!!c,i[i.indexOf(l)]=null),p.__e(P,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=ur(n.__e,t,n,r,o,i,s,c,u);(_=p.diffed)&&_(t)}function Fn(e,t,n){for(var r=0;r<n.length;r++)Ee(n[r],n[++r],n[++r]);p.__c&&p.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(i){i.call(o)})}catch(i){p.__e(i,o.__v)}})}function ur(e,t,n,r,o,i,s,l,c){var u,_,a,g=n.props,v=t.props,f=t.type,d=0;if(f==="svg"&&(o=!0),i!=null){for(;d<i.length;d++)if((u=i[d])&&"setAttribute"in u==!!f&&(f?u.localName===f:u.nodeType===3)){e=u,i[d]=null;break}}if(e==null){if(f===null)return document.createTextNode(v);e=o?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,v.is&&v),i=null,l=!1}if(f===null)g===v||l&&e.data===v||(e.data=v);else{if(i=i&&ne.call(e.childNodes),_=(g=n.props||at).dangerouslySetInnerHTML,a=v.dangerouslySetInnerHTML,!l){if(i!=null)for(g={},d=0;d<e.attributes.length;d++)g[e.attributes[d].name]=e.attributes[d].value;(a||_)&&(a&&(_&&a.__html==_.__html||a.__html===e.innerHTML)||(e.innerHTML=a&&a.__html||""))}if(cr(e,v,g,o,l),a)t.__k=[];else if(In(e,Te(d=t.props.children)?d:[d],t,n,r,o&&f!=="foreignObject",i,s,i?i[0]:n.__k&&Tt(n,0),l,c),i!=null)for(d=i.length;d--;)i[d]!=null&&yn(i[d]);l||("value"in v&&(d=v.value)!==void 0&&(d!==e.value||f==="progress"&&!d||f==="option"&&d!==g.value)&&Yt(e,"value",d,g.value,!1),"checked"in v&&(d=v.checked)!==void 0&&d!==e.checked&&Yt(e,"checked",d,g.checked,!1))}return e}function Ee(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){p.__e(r,n)}}function Se(e,t,n){var r,o;if(p.unmount&&p.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Ee(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){p.__e(i,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&Se(r[o],t,n||typeof e.type!="function");n||e.__e==null||yn(e.__e),e.__=e.__e=e.__d=void 0}function fr(e,t,n){return this.constructor(e,n)}function hr(e,t,n){var r,o,i,s;p.__&&p.__(e,t),o=(r=typeof n=="function")?null:n&&n.__k||t.__k,i=[],s=[],Be(t,e=(!r&&n||t).__k=ar(N,null,[e]),o||at,at,t.ownerSVGElement!==void 0,!r&&n?[n]:o?null:t.firstChild?ne.call(t.childNodes):null,i,!r&&n?n:o?o.__e:t.firstChild,r,s),Fn(i,e,s)}ne=mn.slice,p={__e:function(e,t,n,r){for(var o,i,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,r||{}),s=o.__d),s)return o.__E=o}catch(l){e=l}throw e}},vn=0,pn=function(e){return e!=null&&e.constructor===void 0},Mt.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=z({},this.state),typeof e=="function"&&(e=e(z({},n),this.props)),e&&z(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),ze(this))},Mt.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ze(this))},Mt.prototype.render=N,J=[],gn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,we=function(e,t){return e.__v.__b-t.__v.__b},Gt.__r=0;var Kt,B,ve,Le,Fe=0,Cn=[],Ot=[],je=p.__b,Ve=p.__r,Ge=p.diffed,Ye=p.__c,Ke=p.unmount;function An(e,t){p.__h&&p.__h(B,e,Fe||t),Fe=0;var n=B.__H||(B.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Ot}),n.__[e]}function _r(e,t){var n=An(Kt++,3);!p.__s&&Nn(n.__H,t)&&(n.__=e,n.i=t,B.__H.__h.push(n))}function Mn(e){return Fe=5,re(function(){return{current:e}},[])}function re(e,t){var n=An(Kt++,7);return Nn(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function dr(){for(var e;e=Cn.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(qt),e.__H.__h.forEach(Ce),e.__H.__h=[]}catch(t){e.__H.__h=[],p.__e(t,e.__v)}}p.__b=function(e){B=null,je&&je(e)},p.__r=function(e){Ve&&Ve(e),Kt=0;var t=(B=e.__c).__H;t&&(ve===B?(t.__h=[],B.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Ot,n.__N=n.i=void 0})):(t.__h.forEach(qt),t.__h.forEach(Ce),t.__h=[],Kt=0)),ve=B},p.diffed=function(e){Ge&&Ge(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Cn.push(t)!==1&&Le===p.requestAnimationFrame||((Le=p.requestAnimationFrame)||vr)(dr)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Ot&&(n.__=n.__V),n.i=void 0,n.__V=Ot})),ve=B=null},p.__c=function(e,t){t.some(function(n){try{n.__h.forEach(qt),n.__h=n.__h.filter(function(r){return!r.__||Ce(r)})}catch(r){t.some(function(o){o.__h&&(o.__h=[])}),t=[],p.__e(r,n.__v)}}),Ye&&Ye(e,t)},p.unmount=function(e){Ke&&Ke(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{qt(r)}catch(o){t=o}}),n.__H=void 0,t&&p.__e(t,n.__v))};var Xe=typeof requestAnimationFrame=="function";function vr(e){var t,n=function(){clearTimeout(r),Xe&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Xe&&(t=requestAnimationFrame(n))}function qt(e){var t=B,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),B=t}function Ce(e){var t=B;e.__c=e.__(),B=t}function Nn(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function oe(){throw new Error("Cycle detected")}function De(){if(lt>1)lt--;else{for(var e,t=!1;Nt!==void 0;){var n=Nt;for(Nt=void 0,Ae++;n!==void 0;){var r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&$n(n))try{n.c()}catch(o){t||(e=o,t=!0)}n=r}}if(Ae=0,lt--,t)throw e}}var C=void 0,Nt=void 0,lt=0,Ae=0,Xt=0;function xn(e){if(C!==void 0){var t=e.n;if(t===void 0||t.t!==C)return t={i:0,S:e,p:C.s,n:void 0,t:C,e:void 0,x:void 0,r:t},C.s!==void 0&&(C.s.n=t),C.s=t,e.n=t,32&C.f&&e.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=C.s,t.n=void 0,C.s.n=t,C.s=t),t}}function $(e){this.v=e,this.i=0,this.n=void 0,this.t=void 0}$.prototype.h=function(){return!0};$.prototype.S=function(e){this.t!==e&&e.e===void 0&&(e.x=this.t,this.t!==void 0&&(this.t.e=e),this.t=e)};$.prototype.U=function(e){if(this.t!==void 0){var t=e.e,n=e.x;t!==void 0&&(t.x=n,e.e=void 0),n!==void 0&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n)}};$.prototype.subscribe=function(e){var t=this;return ie(function(){var n=t.value,r=32&this.f;this.f&=-33;try{e(n)}finally{this.f|=r}})};$.prototype.valueOf=function(){return this.value};$.prototype.toString=function(){return this.value+""};$.prototype.toJSON=function(){return this.value};$.prototype.peek=function(){return this.v};Object.defineProperty($.prototype,"value",{get:function(){var e=xn(this);return e!==void 0&&(e.i=this.i),this.v},set:function(e){if(C instanceof L&&function(){throw new Error("Computed cannot have side-effects")}(),e!==this.v){Ae>100&&oe(),this.v=e,this.i++,Xt++,lt++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{De()}}}});function kn(e){return new $(e)}function $n(e){for(var t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function Tn(e){for(var t=e.s;t!==void 0;t=t.n){var n=t.S.n;if(n!==void 0&&(t.r=n),t.S.n=t,t.i=-1,t.n===void 0){e.s=t;break}}}function Bn(e){for(var t=e.s,n=void 0;t!==void 0;){var r=t.p;t.i===-1?(t.S.U(t),r!==void 0&&(r.n=t.n),t.n!==void 0&&(t.n.p=r)):n=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=r}e.s=n}function L(e){$.call(this,void 0),this.x=e,this.s=void 0,this.g=Xt-1,this.f=4}(L.prototype=new $).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===Xt))return!0;if(this.g=Xt,this.f|=1,this.i>0&&!$n(this))return this.f&=-2,!0;var e=C;try{Tn(this),C=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return C=e,Bn(this),this.f&=-2,!0};L.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}$.prototype.S.call(this,e)};L.prototype.U=function(e){if(this.t!==void 0&&($.prototype.U.call(this,e),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}};L.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;e!==void 0;e=e.x)e.t.N()}};L.prototype.peek=function(){if(this.h()||oe(),16&this.f)throw this.v;return this.v};Object.defineProperty(L.prototype,"value",{get:function(){1&this.f&&oe();var e=xn(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}});function En(e){return new L(e)}function Dn(e){var t=e.u;if(e.u=void 0,typeof t=="function"){lt++;var n=C;C=void 0;try{t()}catch(r){throw e.f&=-2,e.f|=8,Pe(e),r}finally{C=n,De()}}}function Pe(e){for(var t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,Dn(e)}function pr(e){if(C!==this)throw new Error("Out-of-order effect");Bn(this),C=e,this.f&=-2,8&this.f&&Pe(this),De()}function Bt(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}Bt.prototype.c=function(){var e=this.S();try{if(8&this.f||this.x===void 0)return;var t=this.x();typeof t=="function"&&(this.u=t)}finally{e()}};Bt.prototype.S=function(){1&this.f&&oe(),this.f|=1,this.f&=-9,Dn(this),Tn(this),lt++;var e=C;return C=this,pr.bind(this,e)};Bt.prototype.N=function(){2&this.f||(this.f|=2,this.o=Nt,Nt=this)};Bt.prototype.d=function(){this.f|=8,1&this.f||Pe(this)};function ie(e){var t=new Bt(e);try{t.c()}catch(n){throw t.d(),n}return t.d.bind(t)}var se,pe;function ft(e,t){p[e]=t.bind(null,p[e]||function(){})}function Jt(e){pe&&pe(),pe=e&&e.S()}function Pn(e){var t=this,n=e.data,r=A(n);r.value=n;var o=re(function(){for(var i=t.__v;i=i.__;)if(i.__c){i.__c.__$f|=4;break}return t.__$u.c=function(){var s;!pn(o.peek())&&((s=t.base)==null?void 0:s.nodeType)===3?t.base.data=o.peek():(t.__$f|=1,t.setState({}))},En(function(){var s=r.value.value;return s===0?0:s===!0?"":s||""})},[]);return o.value}Pn.displayName="_st";Object.defineProperties($.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:Pn},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});ft("__b",function(e,t){if(typeof t.type=="string"){var n,r=t.props;for(var o in r)if(o!=="children"){var i=r[o];i instanceof $&&(n||(t.__np=n={}),n[o]=i,r[o]=i.peek())}}e(t)});ft("__r",function(e,t){Jt();var n,r=t.__c;r&&(r.__$f&=-2,(n=r.__$u)===void 0&&(r.__$u=n=function(o){var i;return ie(function(){i=this}),i.c=function(){r.__$f|=1,r.setState({})},i}())),se=r,Jt(n),e(t)});ft("__e",function(e,t,n,r){Jt(),se=void 0,e(t,n,r)});ft("diffed",function(e,t){Jt(),se=void 0;var n;if(typeof t.type=="string"&&(n=t.__e)){var r=t.__np,o=t.props;if(r){var i=n.U;if(i)for(var s in i){var l=i[s];l!==void 0&&!(s in r)&&(l.d(),i[s]=void 0)}else n.U=i={};for(var c in r){var u=i[c],_=r[c];u===void 0?(u=gr(n,c,_,o),i[c]=u):u.o(_,o)}}}e(t)});function gr(e,t,n,r){var o=t in e&&e.ownerSVGElement===void 0,i=kn(n);return{o:function(s,l){i.value=s,r=l},d:ie(function(){var s=i.value.value;r[t]!==s&&(r[t]=s,o?e[t]=s:s?e.setAttribute(t,s):e.removeAttribute(t))})}}ft("unmount",function(e,t){if(typeof t.type=="string"){var n=t.__e;if(n){var r=n.U;if(r){n.U=void 0;for(var o in r){var i=r[o];i&&i.d()}}}}else{var s=t.__c;if(s){var l=s.__$u;l&&(s.__$u=void 0,l.d())}}e(t)});ft("__h",function(e,t,n,r){(r<3||r===9)&&(t.__$f|=2),e(t,n,r)});Mt.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u;if(!(n&&n.s!==void 0||4&this.__$f)||3&this.__$f)return!0;for(var r in t)return!0;for(var o in e)if(o!=="__source"&&e[o]!==this.props[o])return!0;for(var i in this.props)if(!(i in e))return!0;return!1};function A(e){return re(function(){return kn(e)},[])}function Qt(e){var t=Mn(e);return t.current=e,se.__$f|=4,re(function(){return En(function(){return t.current()})},[])}function W(e){var t=Mn(e);t.current=e,_r(function(){return ie(function(){return t.current()})},[])}function mr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function E(e){if(this.size=e|0,this.size<=1||this.size&this.size-1)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=e<<1;for(var t=new Array(this.size*2),n=0;n<t.length;n+=2){const c=Math.PI*n/this.size;t[n]=Math.cos(c),t[n+1]=-Math.sin(c)}this.table=t;for(var r=0,o=1;this.size>o;o<<=1)r++;this._width=r%2===0?r-1:r,this._bitrev=new Array(1<<this._width);for(var i=0;i<this._bitrev.length;i++){this._bitrev[i]=0;for(var s=0;s<this._width;s+=2){var l=this._width-s-2;this._bitrev[i]|=(i>>>s&3)<<l}}this._out=null,this._data=null,this._inv=0}var yr=E;E.prototype.fromComplexArray=function(t,n){for(var r=n||new Array(t.length>>>1),o=0;o<t.length;o+=2)r[o>>>1]=t[o];return r};E.prototype.createComplexArray=function(){const t=new Array(this._csize);for(var n=0;n<t.length;n++)t[n]=0;return t};E.prototype.toComplexArray=function(t,n){for(var r=n||this.createComplexArray(),o=0;o<r.length;o+=2)r[o]=t[o>>>1],r[o+1]=0;return r};E.prototype.completeSpectrum=function(t){for(var n=this._csize,r=n>>>1,o=2;o<r;o+=2)t[n-o]=t[o],t[n-o+1]=-t[o+1]};E.prototype.transform=function(t,n){if(t===n)throw new Error("Input and output buffers must be different");this._out=t,this._data=n,this._inv=0,this._transform4(),this._out=null,this._data=null};E.prototype.realTransform=function(t,n){if(t===n)throw new Error("Input and output buffers must be different");this._out=t,this._data=n,this._inv=0,this._realTransform4(),this._out=null,this._data=null};E.prototype.inverseTransform=function(t,n){if(t===n)throw new Error("Input and output buffers must be different");this._out=t,this._data=n,this._inv=1,this._transform4();for(var r=0;r<t.length;r++)t[r]/=this.size;this._out=null,this._data=null};E.prototype._transform4=function(){var t=this._out,n=this._csize,r=this._width,o=1<<r,i=n/o<<1,s,l,c=this._bitrev;if(i===4)for(s=0,l=0;s<n;s+=i,l++){const d=c[l];this._singleTransform2(s,d,o)}else for(s=0,l=0;s<n;s+=i,l++){const d=c[l];this._singleTransform4(s,d,o)}var u=this._inv?-1:1,_=this.table;for(o>>=2;o>=2;o>>=2){i=n/o<<1;var a=i>>>2;for(s=0;s<n;s+=i)for(var g=s+a,v=s,f=0;v<g;v+=2,f+=o){const d=v,I=d+a,m=I+a,y=m+a,S=t[d],F=t[d+1],b=t[I],x=t[I+1],k=t[m],T=t[m+1],M=t[y],P=t[y+1],j=S,V=F,G=_[f],Y=u*_[f+1],K=b*G-x*Y,X=b*Y+x*G,_t=_[2*f],dt=u*_[2*f+1],vt=k*_t-T*dt,pt=k*dt+T*_t,gt=_[3*f],mt=u*_[3*f+1],yt=M*gt-P*mt,bt=M*mt+P*gt,It=j+vt,rt=V+pt,ot=j-vt,wt=V-pt,St=K+yt,it=X+bt,st=u*(K-yt),Ft=u*(X-bt),Dt=It+St,ae=rt+it,le=It-St,ce=rt-it,ue=ot+Ft,fe=wt-st,he=ot-Ft,_e=wt+st;t[d]=Dt,t[d+1]=ae,t[I]=ue,t[I+1]=fe,t[m]=le,t[m+1]=ce,t[y]=he,t[y+1]=_e}}};E.prototype._singleTransform2=function(t,n,r){const o=this._out,i=this._data,s=i[n],l=i[n+1],c=i[n+r],u=i[n+r+1],_=s+c,a=l+u,g=s-c,v=l-u;o[t]=_,o[t+1]=a,o[t+2]=g,o[t+3]=v};E.prototype._singleTransform4=function(t,n,r){const o=this._out,i=this._data,s=this._inv?-1:1,l=r*2,c=r*3,u=i[n],_=i[n+1],a=i[n+r],g=i[n+r+1],v=i[n+l],f=i[n+l+1],d=i[n+c],I=i[n+c+1],m=u+v,y=_+f,S=u-v,F=_-f,b=a+d,x=g+I,k=s*(a-d),T=s*(g-I),M=m+b,P=y+x,j=S+T,V=F-k,G=m-b,Y=y-x,K=S-T,X=F+k;o[t]=M,o[t+1]=P,o[t+2]=j,o[t+3]=V,o[t+4]=G,o[t+5]=Y,o[t+6]=K,o[t+7]=X};E.prototype._realTransform4=function(){var t=this._out,n=this._csize,r=this._width,o=1<<r,i=n/o<<1,s,l,c=this._bitrev;if(i===4)for(s=0,l=0;s<n;s+=i,l++){const de=c[l];this._singleRealTransform2(s,de>>>1,o>>>1)}else for(s=0,l=0;s<n;s+=i,l++){const de=c[l];this._singleRealTransform4(s,de>>>1,o>>>1)}var u=this._inv?-1:1,_=this.table;for(o>>=2;o>=2;o>>=2){i=n/o<<1;var a=i>>>1,g=a>>>1,v=g>>>1;for(s=0;s<n;s+=i)for(var f=0,d=0;f<=v;f+=2,d+=o){var I=s+f,m=I+g,y=m+g,S=y+g,F=t[I],b=t[I+1],x=t[m],k=t[m+1],T=t[y],M=t[y+1],P=t[S],j=t[S+1],V=F,G=b,Y=_[d],K=u*_[d+1],X=x*Y-k*K,_t=x*K+k*Y,dt=_[2*d],vt=u*_[2*d+1],pt=T*dt-M*vt,gt=T*vt+M*dt,mt=_[3*d],yt=u*_[3*d+1],bt=P*mt-j*yt,It=P*yt+j*mt,rt=V+pt,ot=G+gt,wt=V-pt,St=G-gt,it=X+bt,st=_t+It,Ft=u*(X-bt),Dt=u*(_t-It),ae=rt+it,le=ot+st,ce=wt+Dt,ue=St-Ft;if(t[I]=ae,t[I+1]=le,t[m]=ce,t[m+1]=ue,f===0){var fe=rt-it,he=ot-st;t[y]=fe,t[y+1]=he;continue}if(f!==v){var _e=wt,Gn=-St,Yn=rt,Kn=-ot,Xn=-u*Dt,Jn=-u*Ft,Qn=-u*st,Zn=-u*it,tr=_e+Xn,er=Gn+Jn,nr=Yn+Zn,rr=Kn-Qn,Re=s+g-f,He=s+a-f;t[Re]=tr,t[Re+1]=er,t[He]=nr,t[He+1]=rr}}}};E.prototype._singleRealTransform2=function(t,n,r){const o=this._out,i=this._data,s=i[n],l=i[n+r],c=s+l,u=s-l;o[t]=c,o[t+1]=0,o[t+2]=u,o[t+3]=0};E.prototype._singleRealTransform4=function(t,n,r){const o=this._out,i=this._data,s=this._inv?-1:1,l=r*2,c=r*3,u=i[n],_=i[n+r],a=i[n+l],g=i[n+c],v=u+a,f=u-a,d=_+g,I=s*(_-g),m=v+d,y=f,S=-I,F=v-d,b=f,x=I;o[t]=m,o[t+1]=0,o[t+2]=y,o[t+3]=S,o[t+4]=F,o[t+5]=0,o[t+6]=b,o[t+7]=x};const br=mr(yr);class xt{constructor(t,n){w(this,"_inputLength");w(this,"_fft");w(this,"_bufferSupplier");w(this,"_paddedInputBuffer");w(this,"_transformBuffer");w(this,"_inverseBuffer");if(t<1)throw new Error("Input length must be at least one");this._inputLength=t,this._fft=new br(Sr(2*t)),this._bufferSupplier=n,this._paddedInputBuffer=this._bufferSupplier(this._fft.size),this._transformBuffer=this._bufferSupplier(2*this._fft.size),this._inverseBuffer=this._bufferSupplier(2*this._fft.size)}static forFloat32Array(t){return new xt(t,n=>new Float32Array(n))}static forFloat64Array(t){return new xt(t,n=>new Float64Array(n))}static forNumberArray(t){return new xt(t,n=>Array(n))}get inputLength(){return this._inputLength}autocorrelate(t,n=this._bufferSupplier(t.length)){if(t.length!==this._inputLength)throw new Error(`Input must have length ${this._inputLength} but had length ${t.length}`);for(let o=0;o<t.length;o++)this._paddedInputBuffer[o]=t[o];for(let o=t.length;o<this._paddedInputBuffer.length;o++)this._paddedInputBuffer[o]=0;this._fft.realTransform(this._transformBuffer,this._paddedInputBuffer),this._fft.completeSpectrum(this._transformBuffer);const r=this._transformBuffer;for(let o=0;o<r.length;o+=2)r[o]=r[o]*r[o]+r[o+1]*r[o+1],r[o+1]=0;this._fft.inverseTransform(this._inverseBuffer,this._transformBuffer);for(let o=0;o<t.length;o++)n[o]=this._inverseBuffer[2*o];return n}}function Ir(e){const t=[];let n=!1,r=-1/0,o=-1;for(let i=1;i<e.length-1;i++)e[i-1]<=0&&e[i]>0?(n=!0,o=i,r=e[i]):e[i-1]>0&&e[i]<=0?(n=!1,o!==-1&&t.push(o)):n&&e[i]>r&&(r=e[i],o=i);return t}function wr(e,t){const[n,r,o]=[e-1,e,e+1],[i,s,l]=[t[n],t[r],t[o]],c=i/2-s+l/2,u=-(i/2)*(r+o)+s*(n+o)-l/2*(n+r),_=i*r*o/2-s*n*o+l*n*r/2,a=-u/(2*c),g=c*a*a+u*a+_;return[a,g]}class kt{constructor(t,n){w(this,"_autocorrelator");w(this,"_nsdfBuffer");w(this,"_clarityThreshold",.9);this._autocorrelator=new xt(t,n),this._nsdfBuffer=n(t)}static forFloat32Array(t){return new kt(t,n=>new Float32Array(n))}static forFloat64Array(t){return new kt(t,n=>new Float64Array(n))}static forNumberArray(t){return new kt(t,n=>Array(n))}get inputLength(){return this._autocorrelator.inputLength}findPitch(t,n){this._nsdf(t);const r=Ir(this._nsdfBuffer);if(r.length===0)return[0,0];const o=Math.max(...r.map(c=>this._nsdfBuffer[c])),i=r.find(c=>this._nsdfBuffer[c]>=this._clarityThreshold*o),[s,l]=wr(i,this._nsdfBuffer);return[n/s,Math.min(l,1)]}_nsdf(t){this._autocorrelator.autocorrelate(t,this._nsdfBuffer);let n=2*this._nsdfBuffer[0],r;for(r=0;r<this._nsdfBuffer.length&&n>0;r++)this._nsdfBuffer[r]=2*this._nsdfBuffer[r]/n,n-=t[r]**2+t[t.length-r-1]**2;for(;r<this._nsdfBuffer.length;r++)this._nsdfBuffer[r]=0}}function Sr(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}class Fr{constructor(){w(this,"stream");w(this,"context");w(this,"source");w(this,"splitter");w(this,"analyserNode");w(this,"fftSize");w(this,"dataArray");w(this,"channelCount");w(this,"activeChannel");this.stream=null,this.context=null,this.source=null,this.splitter=null,this.analyserNode=null,this.fftSize=2048,this.dataArray=new Float32Array(this.fftSize),this.channelCount=0,this.activeChannel=-1}async setup(){try{if(this.stream=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),this.stream===null)throw new Error("No media stream");if(this.context=new AudioContext,this.source=this.context.createMediaStreamSource(this.stream),this.source===null)throw new Error("No media stream source");if(this.channelCount=this.source.channelCount,this.channelCount<=0)throw new Error("No audio channels");return this.splitter=this.context.createChannelSplitter(this.channelCount),this.source.connect(this.splitter),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=this.fftSize,this.setActiveChannel(0),Promise.resolve()}catch(t){return Promise.reject(t)}}isActive(){return this.stream!==null&&this.stream.active}getChannelCount(){return this.channelCount}getActiveChannel(){return this.activeChannel}setActiveChannel(t){if(t<0||t>=this.channelCount)throw new Error("Invalid channel");if(this.splitter===null)throw new Error("No splitter");if(this.analyserNode===null)throw new Error("No analyser node");t!==this.activeChannel&&(this.activeChannel!==-1&&this.analyserNode.disconnect(),this.activeChannel=t,this.splitter.connect(this.analyserNode,t,0))}getFFTSize(){return this.fftSize}getSampleRate(){if(this.context)return this.context.sampleRate;throw new Error("No audio context")}updateDataArray(){if(this.analyserNode)this.analyserNode.getFloatTimeDomainData(this.dataArray);else throw new Error("No AnalyserNode")}setDataArray(t){this.dataArray=new Float32Array(t)}getDataArray(){return this.dataArray}}var Cr=0;function h(e,t,n,r,o,i){var s,l,c={};for(l in t)l=="ref"?s=t[l]:c[l]=t[l];var u={type:e,props:c,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Cr,__source:o,__self:i};if(typeof e=="function"&&(s=e.defaultProps))for(l in s)c[l]===void 0&&(c[l]=s[l]);return p.vnode&&p.vnode(u),u}function Ar(e){return h(N,{children:h("button",{id:"theme-switch",onClick:()=>{e.darkMode.value=!e.darkMode.value},children:e.darkMode.value?"Light Mode":"Dark Mode"})})}class Mr{constructor(){w(this,"tones");w(this,"placeholder");w(this,"names");w(this,"sharpSymbol");w(this,"flatSymbol");w(this,"baseFreq");this.tones=12,this.placeholder="*",this.names="C*D*EF*G*A*B",this.sharpSymbol="#",this.flatSymbol="b",this.baseFreq=new Float32Array(this.tones),this.baseFreq.set([16.35,17.32,18.35,19.45,20.6,21.83,23.12,24.5,25.96,27.5,29.14,30.87])}testIndex(t){if(t<0||!Number.isInteger(t))throw new Error("Invalid index")}testName(t){if(!this.isNatural(t)&&!this.isSharp(t)&&!this.isFlat(t))throw new Error("Invalid note name, must be natural, sharp or flat with capital letter")}testOctave(t){if(t<0||!Number.isInteger(t))throw new Error("Invalid octave, must be positive integer")}testFreq(t){if(t<0)throw new Error("Invalid frequency, must be positive")}isSharp(t){return t.length===2&&t[0]!==this.placeholder&&t[1]===this.sharpSymbol&&this.names.indexOf(t[0])!==-1}isFlat(t){return t.length===2&&t[0]!==this.placeholder&&t[1]===this.flatSymbol&&this.names.indexOf(t[0])!==-1}isNatural(t){return t.length===1&&t[0]!==this.placeholder&&this.names.indexOf(t[0])!==-1}isEqual(t,n){return t&&n&&t.frequency===n.frequency}getIndex(t,n){this.testName(t),this.testOctave(n);const r=this.isSharp(t)?1:this.isFlat(t)?-1:0;return this.names.indexOf(t[0])+r+this.tones*n}getFreq(t,n){const r=this.getIndex(t,n);return this.baseFreq[r%this.tones]*Math.pow(2,n)}get(t,n){const r=this.getIndex(t,n);return{frequency:this.getFreq(t,n),name:t,octave:n,index:r}}getNameByIndex(t,n){this.testIndex(t);const r=this.names[t%this.tones];return n&&r===this.placeholder?this.names[(t+1)%this.tones]+this.flatSymbol:r===this.placeholder?this.names[(t-1)%this.tones]+this.sharpSymbol:r}getOctaveByIndex(t){return this.testIndex(t),Math.floor(t/this.tones)}getByIndex(t,n){const r=this.getNameByIndex(t,n),o=this.getOctaveByIndex(t);return{frequency:this.getFreq(r,o),name:r,octave:o,index:t}}getOctaveByFreq(t){return this.testFreq(t),Math.floor(Math.log2(t/this.baseFreq[0]))}getByFreq(t,n,r=0){const o=this.getOctaveByFreq(t);for(let i=0;i<this.baseFreq.length;i+=1){const s=this.baseFreq[i]*Math.pow(2,o),l=s-s*r,c=s+s*r;if(l<=t&&c>=t)return{frequency:s,name:this.getNameByIndex(i,n),octave:o,index:i+this.tones*o}}return null}getDifference(t,n){if(t&&n){const r=(t.index-n.index)/this.tones;return r>1?1:r<-1?-1:r}return 0}getInRange(t,n,r,o,i,s){const l=[],c=this.getIndex(t,n),u=this.getIndex(r,o);if(u<c)throw new Error("Invalid range");const _=u-c,a=_!==0?_:1;if(s=s||a,s<0||!Number.isInteger(s))throw new Error("Invalid total notes");const g=Math.ceil(s/a);for(let v=0;v<g;v+=1)for(let f=c;f<=u&&!(l.length>=s);f+=1){const d=this.getByIndex(f,i);l.push(d)}return l}getShuffledInRange(t,n,r,o,i,s){const l=this.getInRange(t,n,r,o,i,s);for(let c=l.length-1;c>0;c--){const u=Math.floor(Math.random()*(c+1));[l[c],l[u]]=[l[u],l[c]]}return l}getShuffledFretboard(t,n,r,o){const i=[];return t.forEach(s=>{const l=this.isFlat(s.note),c=this.getIndex(s.note,s.octave),u=this.getByIndex(c+n,l),_=this.getByIndex(c+r,l);i.push(this.getShuffledInRange(u.name,u.octave,_.name,_.octave,l,o))}),i}}const Rn=e=>{const t=["th","st","nd","rd"][e%10]||"th";return e+t+" String"},Hn=e=>{const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n].octave;return t},Un=(e,t)=>{const n=Hn(e);return Math.min(...n)+Math.floor(t/12)},zn=(e,t)=>{const n=Hn(e);return Math.max(...n)+Math.ceil(t/12)},Nr=e=>{let t=0;const n=e.noteArray.map((r,o)=>{o%e.columns===0&&(t+=1);const i=e.index===o?"underline":"inherit",s=e.index===o?e.highlightColor:"inherit",l=r.name+r.octave;return h("div",{className:"node",style:{textDecoration:i,color:s,gridRow:t},children:l},o)});return h("div",{id:e.id,children:n})};function xr(e){const t=Rn(e.guitarString);return h(N,{children:h("section",{id:"note-grid-section",className:"section-large",children:[h("label",{id:"note-grid-label",children:t}),h(Nr,{id:"note-grid",noteArray:e.noteArray.value,index:e.index.value,columns:e.columns,highlightColor:e.colors.value.primary})]})})}const kr="/assets/g-clef-c1cea658.svg",$r="/assets/c-clef-fcdac83a.svg",Tr="/assets/f-clef-398f8465.svg",Br="/assets/sharp-0a8010b0.svg",Er="/assets/flat-9771bd12.svg",Dr="/assets/quarter-note-stem-up-7f7d9684.svg",Pr="/assets/quarter-note-stem-down-6cf9d1aa.svg",D=e=>Math.floor(nt/ht*e),tt=e=>{const t=new Image;return t.src=e,t},et=e=>Math.floor(nt/ht*e*2),R=Math.floor(96*15),nt=Math.floor(28.5*15),Q=2,ht=38,O=ht/2,Z=O-6,Zt=O+2,Wt=4,On=3,ct=Math.floor(R/ht*4.3),te=D(Z),Je=D(Zt),H=Math.floor(nt/ht*2),Qe=D(Z-1)-Q,Me=et(6),Ze=Math.floor(Me*.4),Rr=tt(kr),tn=D(Z-4),At=et(4),Pt=Math.floor(At*.75),en=tt($r),nn=D(Z)+Q,Ne=et(3.25),rn=Math.floor(Ne*.9),Hr=tt(Tr),Ur=et(1.5),on=Math.floor(nt/ht*2),Lt=et(1.5),Rt=Math.floor(Lt*.5),zr=tt(Br),Or=tt(Er),xe=et(4),Ht=Math.floor(xe*.5),qr=tt(Dr),Wr=tt(Pr),sn=et(5);let ge=null,me=null;const qn=(e,t,n)=>{const r=Math.round(e.index*.5834)-26,o=e.name[1]==="#"?1:0,i=-r+o;return t==="treble"?i+O-1+7*(n-Wt+1):t==="alto"?i+O-7+7*(n-Wt+1):t==="baritone"?i+O-11+7*(n-Wt+1):i+O-13+7*(n-On+1)},$t=(e,t,n,r,o,i)=>{t=Math.floor(t),n=Math.floor(n),r=Math.floor(r),o=Math.floor(o),e.lineWidth=i,e.beginPath(),e.moveTo(t,n),e.lineTo(r,o),e.stroke()},q=(e,t,n,r,o,i)=>{n=Math.floor(n),r=Math.floor(r),e.drawImage(t,n,r,o,i),e.globalCompositeOperation="source-atop",e.fillRect(n,r,o,i),e.globalCompositeOperation="source-over"},Lr=(e,t)=>{const n=Math.floor(t/4),r=Math.floor((R-ct)/t);for(let o=Z;o<=Zt;o+=2){const i=D(o);$t(e,0,i,R,i,Q)}for(let o=0;o<2;o+=1){const i=Math.floor(R*o);$t(e,i,te,i,Je,Q*5)}for(let o=n-1;o>0;o-=1){const i=Math.floor(r*o*4+ct-r*.5);$t(e,i,te,i,Je,Q*2.5)}},Ut=(e,t,n,r,o)=>{const i=(Math.abs(7*t)+1).toString();t>0?(e.textBaseline="ideographic",e.fillText(i,Math.floor(n),Math.floor(r))):t<0&&(e.textBaseline="top",e.fillText(i,Math.floor(n),Math.floor(r+o)))},jr=(e,t,n)=>{const r=n-(t==="bass"?On:Wt);t==="treble"?(q(e,Rr,H,Qe,Ze,Me),Ut(e,r,H+Ze*.64,Qe,Me)):t==="alto"?(q(e,en,H,te,Pt,At),Ut(e,r,H+Pt*.4,te,At)):t==="baritone"?(q(e,en,H,tn,Pt,At),Ut(e,r,H+Pt*.4,tn,At)):(q(e,Hr,H,nn,rn,Ne),Ut(e,r,H+rn*.4,nn,Ne))},Vr=(e,t,n)=>{const r=t-on,o=t+on;if(n>Zt)for(let i=Zt+1;i<=n;i+=2){const s=D(i);$t(e,r,s,o,s,Q)}else if(n<Z)for(let i=Z-1;i>=n;i-=2){const s=D(i);$t(e,r,s,o,s,Q)}},Wn=(e,t,n)=>{if(n>O-2){const r=D(n-7);q(e,qr,t-Ht*.5,r,Ht,xe)}else{const r=D(n-1);q(e,Wr,t-Ht*.5,r,Ht,xe)}},Ln=(e,t,n,r)=>{const o=D(n-2);r.name[1]==="#"?q(e,zr,t-Rt*2,o+Lt*.2,Rt,Lt):r.name[1]==="b"&&q(e,Or,t-Rt*2,o,Rt,Lt)},Gr=(e,t,n,r)=>{e.clearRect(0,0,R,nt),Lr(e,n),jr(e,t,r)},Yr=(e,t,n,r,o,i)=>{const s=r+o>t.length?t.length:r+o;e.clearRect(0,0,R,nt);for(let l=r;l<s;l+=1){const c=t[l],u=qn(c,n,i),_=(R-ct)/o*(l-r)+ct;Vr(e,_,u),Wn(e,_,u),Ln(e,_,u,c)}},Kr=(e,t,n,r,o,i)=>{const s=t[r],l=qn(s,n,i),c=(R-ct)/o*(r%o)+ct;if(ge&&me){const u=Math.floor(R/o);e.clearRect(Math.floor(ge-u*.5),Math.floor(me-sn*.1),u,sn)}Wn(e,c,l),Ln(e,c,l,s),ge=c,me=l>O-2?D(l-7):D(l-1)};function Xr(e){const t=[null,null,null],n=Rn(e.guitarString),r=Qt(()=>Math.floor(e.index.value/e.columns)*e.columns),o=Qt(()=>{const s=e.noteArray.value.reduce((c,u)=>c+u.index,0),l=Math.floor(s/e.noteArray.value.length);return e.clef==="treble"?Math.round((l-8)/12):e.clef==="alto"?Math.round(l/12):e.clef==="baritone"?Math.ceil(l/12):Math.ceil((l-6)/12)}),i=s=>{if(!s)return null;const l=s.getContext("2d");return l.textAlign="center",s};return W(()=>{if(!t[0])return;const s=t[0].getContext("2d");s.font=`${Ur}px monospace`,s.fillStyle=e.colors.value.foreground,s.strokeStyle=e.colors.value.foreground,Gr(s,e.clef,e.columns,o.value)}),W(()=>{if(!t[1])return;const s=t[1].getContext("2d");s.fillStyle=e.colors.value.foreground,s.strokeStyle=e.colors.value.foreground,Yr(s,e.noteArray.value,e.clef,r.value,e.columns,o.value)}),W(()=>{if(!t[2])return;const s=t[2].getContext("2d");s.fillStyle=e.colors.value.primary,Kr(s,e.noteArray.value,e.clef,e.index.value,e.columns,o.value)}),h(N,{children:h("section",{id:"note-staff-section",className:"section-large",children:[h("label",{id:"note-staff-label",children:n}),t.map((s,l)=>h("canvas",{className:"note-staff-canvas",ref:c=>t[l]=i(c),width:R,height:nt,style:{zIndex:l}},l))]})})}function Jr(e){const t=A(!0),n=e.currentNote.value,r=n!==null?n.name+n.octave:"?",o=Qt(()=>t.value===!1?"Current Note ▲":"Current Note ▼");return h("div",{id:"current-note-wrapper",children:[h("button",{id:"current-note-button",className:"button-normal",onClick:()=>t.value=!t.value,children:o}),h("section",{id:"current-note-section",hidden:t,children:r})]})}const ut=33*10,Et=1.8*10,an=Math.floor(ut*.01),Qr=Math.floor(Et*.33),ee=Math.floor(ut*.03),ke=Math.floor(Et*.5),jt=Math.round(ut*.5);let ye=null;const ln=(e,t)=>{e.fillRect(Math.ceil(t-an*.75),0,an,Qr)},jn=(e,t,n,r)=>{e.beginPath(),e.moveTo(Math.floor(t-ee*.5),n),e.lineTo(Math.floor(t+ee*.5),n),e.lineTo(t,n+ke*r),e.fill()},Zr=e=>{e.clearRect(0,0,ut,Et);const t=ut/24;for(let n=jt,r=jt;n>0;n-=t,r+=t)ln(e,n),ln(e,r);jn(e,jt,0,1)},to=(e,t)=>{ye!==null&&e.clearRect(Math.floor(ye-ee*.5),ke,ee,ke);const n=Math.floor(jt*(t+1));jn(e,n,Et,-1),ye=n};function eo(e){const t=[null,null],n=r=>r||null;return W(()=>{if(!t[0])return;const r=t[0].getContext("2d");r.fillStyle=e.colors.value.foreground,r.strokeStyle=e.colors.value.foreground,Zr(r)}),W(()=>{if(!t[1])return;const r=t[1].getContext("2d");r.fillStyle=e.colors.value.foreground,r.strokeStyle=e.colors.value.foreground,to(r,e.difference.value)}),h(N,{children:h("div",{id:"pitch-meter-wrapper",children:[h("label",{id:"pitch-meter-label",children:"Pitch Meter"}),t.map((r,o)=>h("canvas",{className:"pitch-meter-canvas",ref:i=>t[o]=n(i),width:ut,height:Et,style:{zIndex:o}},o))]})})}const no=.7,cn=.99,ro=.01;function oo(e){const t=r=>{const o=r.target;o.validity.valid&&o.value!==""?e.certaintyThreshold.value=parseFloat(o.value):o.value=cn.toString()},n=r=>{r.key==="Enter"&&r.target.blur()};return h(N,{children:h("div",{id:"certainty-input-wrapper",children:[h("label",{className:"options-label",id:"certainty-input-label",children:"Pitch Certainty"}),h("input",{type:"number",id:"certainty-input",className:"options-input",min:no,max:cn,step:ro,value:e.certaintyThreshold,onChange:t,onKeyPress:n})]})})}function io(e){return h(N,{children:h("button",{id:"stop-button",className:"button-large",onClick:()=>{e.audioInputIsActive.value===!0&&(e.started.value=!e.started.value)},children:"stop"})})}const U=new Mr,un=48,so=12,ao=.03,Vn=125,lo=1e3,co=Math.floor(lo/Vn);let be=0,Ct=0,fn=null,Ie=!1;const uo=e=>{const t=h(xr,{noteArray:e.noteArray,guitarString:e.guitarString,index:e.index,columns:e.columns,colors:e.colors}),n=h(Xr,{noteArray:e.noteArray,guitarString:e.guitarString,index:e.index,columns:e.columns,clef:e.clef,colors:e.colors});return e.clef==="scientific"?t:n};function fo(e){const t=e.started,n=e.audioInput,r=e.audioInputIsActive,o=e.pitchDetector,i=e.userInput.tuning,s=e.userInput.startFret,l=e.userInput.endFret,c=e.userInput.notesDisplayFormat,u=A(0),_=A(0),a=A(0),g=A(U.getShuffledFretboard(i,s,l,un)),v=A(g.value[_.value]),f=A(null),d=A(.99),I=Qt(()=>e.darkMode.value===!1?{primary:"#6200EE",foreground:"#121212"}:{primary:"#BB86FC",foreground:"#e4e4e4"});Ie=U.isFlat(i[0].note);const m=()=>{u.value+=1,u.value>=v.value.length-1&&(u.value=0,_.value+=1,_.value>=g.value.length&&(u.value=0,_.value=0,g.value=U.getShuffledFretboard(i,s,l,un)),v.value=g.value[_.value],Ie=U.isFlat(i[_.value].note))},y=()=>{n.updateDataArray();const[S,F]=o.findPitch(n.getDataArray(),n.getSampleRate()),b=F>d.value?U.getByFreq(S,Ie,ao):null;U.isEqual(b,fn)?f.value=b:(be+=1,be>=co&&(f.value=null,be=0)),fn=b;const x=g.value[_.value][u.value];a.value=U.getDifference(f.value,x),U.isEqual(f.value,x)&&m()};return W(()=>(Ct===0&&(Ct=setInterval(()=>{r.value=n.isActive(),y()},Vn)),()=>{Ct!==0&&(clearInterval(Ct),Ct=0)})),h(N,{children:[h(Jr,{currentNote:f}),h("section",{id:"pitch-meter-and-certainty-section",className:"section-small",children:[h(eo,{colors:I,difference:a}),h(oo,{certaintyThreshold:d})]}),h(io,{started:t,audioInputIsActive:r}),h(uo,{noteArray:v,guitarString:g.value.length-_.value,index:u,columns:so,clef:c,colors:I})]})}function ho(e){return e.started.value===!0&&e.pitchDetector!==null&&e.audioInputIsActive.value===!0?h(N,{children:h(fo,{audioInput:e.audioInput,userInput:e.userInput,pitchDetector:e.pitchDetector,started:e.started,audioInputIsActive:e.audioInputIsActive,darkMode:e.darkMode})}):null}const _o="^((?:C#|Db|D#|Eb|F#|Gb|G#|Ab|A#|Bb|[A-G])[0-5]-?)+$",vo=e=>{const t=e.split("-"),n=[];for(const r of t){const o={note:r.substring(0,r.length-1),octave:parseInt(r.substring(r.length-1,r.length),10)};n.push(o)}return n},po=e=>{let t="";for(const n of e)t+=`${n.note}${n.octave}-`;return t=t.slice(0,-1),t};function go(e){const t=A(e.userInput.tuning),n=A(po(e.userInput.tuning)),r=A(e.userInput.startFret),o=A(e.userInput.endFret),i=l=>{const c=l.target;c.validity.valid&&c.value!==""?(t.value=vo(c.value),n.value=c.value,e.setUserInput({tuning:t.value,startOctave:Un(t.value,r.value),endOctave:zn(t.value,o.value)})):c.value=n.value},s=l=>{l.key==="Enter"&&l.target.blur()};return h(N,{children:h("div",{id:"tuning-input-wrapper",children:[h("label",{className:"options-label",children:"Tuning"}),h("input",{id:"tuning-input",className:"options-input",type:"textfield",pattern:_o,value:n,onChange:i,onKeyPress:s})]})})}const hn=0,_n=24;function mo(e){const t=A(e.userInput.tuning),n=A(e.userInput.startFret),r=A(e.userInput.endFret),o=l=>{const c=l.target,u=parseInt(c.value,10);c.validity.valid&&c.value!==""?(u>r.value&&(r.value=u),n.value=u,e.setUserInput({startFret:u,startOctave:Un(t.value,u)})):c.value=n.value.toString()},i=l=>{const c=l.target,u=parseInt(c.value,10);c.validity.valid&&c.value!==""?(u<n.value&&(n.value=u),r.value=u,e.setUserInput({endFret:u,endOctave:zn(t.value,u)})):c.value=r.value.toString()},s=l=>{l.key==="Enter"&&l.target.blur()};return h(N,{children:h("div",{id:"fret-range-input-wrapper",children:[h("label",{className:"options-label",children:"Fret Range"}),h("input",{id:"start-fret",className:"fret-range-input options-input",type:"number",min:hn,max:_n,value:n,onChange:o,onKeyPress:s}),h("input",{id:"end-fret",className:"fret-range-input options-input",type:"number",min:hn,max:_n,value:r,onChange:i,onKeyPress:s})]})})}function yo(e){const t=e.audioInput,n=t.getChannelCount(),r=A(t.getActiveChannel()),o=[];for(let s=0;s<n;s++)o.push(h("option",{value:s,children:s+1}));const i=s=>{const l=s.target,c=parseInt(l.value,10);r.value=c,t.setActiveChannel(c)};return h(N,{children:h("div",{id:"channel-select-wrapper",children:[h("label",{className:"options-label",children:"Input Channel"}),h("select",{id:"channel-select",className:"options-input",value:r,onChange:i,children:o})]})})}const bo=["scientific","treble","alto","baritone","bass"],Io=bo.map((e,t)=>h("option",{value:e,children:e},t));function wo(e){const t=A(e.userInput.notesDisplayFormat),n=r=>{const o=r.target;e.setUserInput({notesDisplayFormat:o.value}),t.value=o.value};return h(N,{children:h("div",{id:"notes-display-format-select-wrapper",children:[h("label",{className:"options-label",children:"Note Display"}),h("select",{id:"notes-display-format-select",className:"options-input",value:t,onChange:n,children:Io})]})})}function So(e){return h(N,{children:h("button",{id:"start-button",className:"button-large",onClick:()=>{e.audioInputIsActive.value===!0&&(e.started.value=!e.started.value)},children:"start"})})}const dn=h("a",{id:"github-link",href:"https://github.com/vannrr/boardr#readme",children:"Project's Github"});function Fo(e){const t=async()=>{await e.audioInput.setup(),e.audioInputIsActive.value=e.audioInput.isActive()};return h("section",{className:"options-section section-small",children:[h("label",{className:"options-label",children:"Please enable audio input to use this app."}),h("button",{className:"button-normal",onClick:t,children:"Enable"})]})}function Co(e){return h("section",{className:"options-section section-small",children:[h(go,{userInput:e.userInput,setUserInput:e.setUserInput}),h(wo,{userInput:e.userInput,setUserInput:e.setUserInput}),h(mo,{userInput:e.userInput,setUserInput:e.setUserInput}),h(yo,{audioInput:e.audioInput})]})}function Ao(e){return e.started.value===!1&&e.audioInputIsActive.value===!0?h(N,{children:[h(Co,{userInput:e.userInput,audioInput:e.audioInput,setUserInput:e.setUserInput}),h(So,{started:e.started,audioInputIsActive:e.audioInputIsActive}),dn]}):e.started.value===!1&&e.audioInputIsActive.value===!1?h(N,{children:[h(Fo,{audioInput:e.audioInput,audioInputIsActive:e.audioInputIsActive}),dn]}):null}const $e={tuning:[{note:"E",octave:2},{note:"A",octave:2},{note:"D",octave:3},{note:"G",octave:3},{note:"B",octave:3},{note:"E",octave:4}],startFret:0,endFret:22,startOctave:2,endOctave:6,notesDisplayFormat:"scientific"},Vt=new Fr,Mo=kt.forFloat32Array(Vt.getFFTSize()),No=e=>{for(const[t,n]of Object.entries(e))n!==void 0&&($e[t]=n)};function xo(){const e=A(!1),t=A(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches),n=A(Vt.isActive());return W(()=>{t.value?document.body.setAttribute("data-theme","dark"):document.body.removeAttribute("data-theme")}),W(()=>{n.value===!1&&e.value===!0&&(e.value=!1)}),h(N,{children:[h(Ar,{darkMode:t}),h(ho,{started:e,audioInput:Vt,userInput:$e,audioInputIsActive:n,pitchDetector:Mo,darkMode:t}),h(Ao,{started:e,audioInput:Vt,userInput:$e,audioInputIsActive:n,setUserInput:No})]})}hr(h(xo,{}),document.getElementById("app"));
