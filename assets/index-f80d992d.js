var sr=Object.defineProperty;var ar=(e,t,n)=>t in e?sr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var S=(e,t,n)=>(ar(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var ee,p,pn,gn,X,ze,mn,Ie,at={},yn=[],lr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ee=Array.isArray;function z(e,t){for(var n in t)e[n]=t[n];return e}function bn(e){var t=e.parentNode;t&&t.removeChild(e)}function cr(e,t,n){var r,o,i,s={};for(i in t)i=="key"?r=t[i]:i=="ref"?o=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?ee.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)s[i]===void 0&&(s[i]=e.defaultProps[i]);return zt(e,s,r,o,null)}function zt(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o??++pn};return o==null&&p.vnode!=null&&p.vnode(i),i}function x(e){return e.children}function Nt(e,t){this.props=e,this.context=t}function kt(e,t){if(t==null)return e.__?kt(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?kt(e):null}function In(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return In(e)}}function Oe(e){(!e.__d&&(e.__d=!0)&&X.push(e)&&!Gt.__r++||ze!==p.debounceRendering)&&((ze=p.debounceRendering)||mn)(Gt)}function Gt(){var e,t,n,r,o,i,s,l,c;for(X.sort(Ie);e=X.shift();)e.__d&&(t=X.length,r=void 0,o=void 0,i=void 0,l=(s=(n=e).__v).__e,(c=n.__P)&&(r=[],o=[],(i=z({},s)).__v=s.__v+1,Be(c,s,i,n.__n,c.ownerSVGElement!==void 0,s.__h!=null?[l]:null,r,l??kt(s),s.__h,o),Cn(r,s,o),s.__e!=l&&In(s)),X.length>t&&X.sort(Ie));Gt.__r=0}function wn(e,t,n,r,o,i,s,l,c,u,_){var a,g,v,f,d,I,m,y,F,w=0,b=r&&r.__k||yn,$=b.length,M=$,k=t.length;for(n.__k=[],a=0;a<k;a++)(f=n.__k[a]=(f=t[a])==null||typeof f=="boolean"||typeof f=="function"?null:typeof f=="string"||typeof f=="number"||typeof f=="bigint"?zt(null,f,null,null,f):Ee(f)?zt(x,{children:f},null,null,null):f.__b>0?zt(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f)!=null?(f.__=n,f.__b=n.__b+1,(y=ur(f,b,m=a+w,M))===-1?v=at:(v=b[y]||at,b[y]=void 0,M--),Be(e,f,v,o,i,s,l,c,u,_),d=f.__e,(g=f.ref)&&v.ref!=g&&(v.ref&&Pe(v.ref,null,f),_.push(g,f.__c||d,f)),d!=null&&(I==null&&(I=d),(F=v===at||v.__v===null)?y==-1&&w--:y!==m&&(y===m+1?w++:y>m?M>k-m?w+=y-m:w--:w=y<m&&y==m-1?y-m:0),m=a+w,typeof f.type!="function"||y===m&&v.__k!==f.__k?typeof f.type=="function"||y===m&&!F?f.__d!==void 0?(c=f.__d,f.__d=void 0):c=d.nextSibling:c=Fn(e,d,c):c=Sn(f,c,e),typeof n.type=="function"&&(n.__d=c))):(v=b[a])&&v.key==null&&v.__e&&(v.__e==c&&(c=kt(v)),we(v,v,!1));for(n.__e=I,a=$;a--;)b[a]!=null&&(typeof n.type=="function"&&b[a].__e!=null&&b[a].__e==n.__d&&(n.__d=b[a].__e.nextSibling),we(b[a],b[a]))}function Sn(e,t,n){for(var r,o=e.__k,i=0;o&&i<o.length;i++)(r=o[i])&&(r.__=e,t=typeof r.type=="function"?Sn(r,t,n):Fn(n,r.__e,t));return t}function Fn(e,t,n){return n==null||n.parentNode!==e?e.insertBefore(t,null):t==n&&t.parentNode!=null||e.insertBefore(t,n),t.nextSibling}function ur(e,t,n,r){var o=e.key,i=e.type,s=n-1,l=n+1,c=t[n];if(c===null||c&&o==c.key&&i===c.type)return n;if(r>(c!=null?1:0))for(;s>=0||l<t.length;){if(s>=0){if((c=t[s])&&o==c.key&&i===c.type)return s;s--}if(l<t.length){if((c=t[l])&&o==c.key&&i===c.type)return l;l++}}return-1}function fr(e,t,n,r,o){var i;for(i in n)i==="children"||i==="key"||i in t||Yt(e,i,null,n[i],r);for(i in t)o&&typeof t[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||n[i]===t[i]||Yt(e,i,t[i],n[i],r)}function qe(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||lr.test(t)?n:n+"px"}function Yt(e,t,n,r,o){var i;t:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||qe(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||qe(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r||e.addEventListener(t,i?Le:We,i):e.removeEventListener(t,i?Le:We,i);else if(t!=="dangerouslySetInnerHTML"){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t in e)try{e[t]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function We(e){return this.l[e.type+!1](p.event?p.event(e):e)}function Le(e){return this.l[e.type+!0](p.event?p.event(e):e)}function Be(e,t,n,r,o,i,s,l,c,u){var _,a,g,v,f,d,I,m,y,F,w,b,$,M,k,A=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(c=n.__h,l=t.__e=n.__e,t.__h=null,i=[l]),(_=p.__b)&&_(t);t:if(typeof A=="function")try{if(m=t.props,y=(_=A.contextType)&&r[_.__c],F=_?y?y.props.value:_.__:r,n.__c?I=(a=t.__c=n.__c).__=a.__E:("prototype"in A&&A.prototype.render?t.__c=a=new A(m,F):(t.__c=a=new Nt(m,F),a.constructor=A,a.render=_r),y&&y.sub(a),a.props=m,a.state||(a.state={}),a.context=F,a.__n=r,g=a.__d=!0,a.__h=[],a._sb=[]),a.__s==null&&(a.__s=a.state),A.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=z({},a.__s)),z(a.__s,A.getDerivedStateFromProps(m,a.__s))),v=a.props,f=a.state,a.__v=t,g)A.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(A.getDerivedStateFromProps==null&&m!==v&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(m,F),!a.__e&&(a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(m,a.__s,F)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(a.props=m,a.state=a.__s,a.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(D){D&&(D.__=t)}),w=0;w<a._sb.length;w++)a.__h.push(a._sb[w]);a._sb=[],a.__h.length&&s.push(a);break t}a.componentWillUpdate!=null&&a.componentWillUpdate(m,a.__s,F),a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(v,f,d)})}if(a.context=F,a.props=m,a.__P=e,a.__e=!1,b=p.__r,$=0,"prototype"in A&&A.prototype.render){for(a.state=a.__s,a.__d=!1,b&&b(t),_=a.render(a.props,a.state,a.context),M=0;M<a._sb.length;M++)a.__h.push(a._sb[M]);a._sb=[]}else do a.__d=!1,b&&b(t),_=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++$<25);a.state=a.__s,a.getChildContext!=null&&(r=z(z({},r),a.getChildContext())),g||a.getSnapshotBeforeUpdate==null||(d=a.getSnapshotBeforeUpdate(v,f)),wn(e,Ee(k=_!=null&&_.type===x&&_.key==null?_.props.children:_)?k:[k],t,n,r,o,i,s,l,c,u),a.base=t.__e,t.__h=null,a.__h.length&&s.push(a),I&&(a.__E=a.__=null)}catch(D){t.__v=null,(c||i!=null)&&(t.__e=l,t.__h=!!c,i[i.indexOf(l)]=null),p.__e(D,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=hr(n.__e,t,n,r,o,i,s,c,u);(_=p.diffed)&&_(t)}function Cn(e,t,n){for(var r=0;r<n.length;r++)Pe(n[r],n[++r],n[++r]);p.__c&&p.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(i){i.call(o)})}catch(i){p.__e(i,o.__v)}})}function hr(e,t,n,r,o,i,s,l,c){var u,_,a,g=n.props,v=t.props,f=t.type,d=0;if(f==="svg"&&(o=!0),i!=null){for(;d<i.length;d++)if((u=i[d])&&"setAttribute"in u==!!f&&(f?u.localName===f:u.nodeType===3)){e=u,i[d]=null;break}}if(e==null){if(f===null)return document.createTextNode(v);e=o?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,v.is&&v),i=null,l=!1}if(f===null)g===v||l&&e.data===v||(e.data=v);else{if(i=i&&ee.call(e.childNodes),_=(g=n.props||at).dangerouslySetInnerHTML,a=v.dangerouslySetInnerHTML,!l){if(i!=null)for(g={},d=0;d<e.attributes.length;d++)g[e.attributes[d].name]=e.attributes[d].value;(a||_)&&(a&&(_&&a.__html==_.__html||a.__html===e.innerHTML)||(e.innerHTML=a&&a.__html||""))}if(fr(e,v,g,o,l),a)t.__k=[];else if(wn(e,Ee(d=t.props.children)?d:[d],t,n,r,o&&f!=="foreignObject",i,s,i?i[0]:n.__k&&kt(n,0),l,c),i!=null)for(d=i.length;d--;)i[d]!=null&&bn(i[d]);l||("value"in v&&(d=v.value)!==void 0&&(d!==e.value||f==="progress"&&!d||f==="option"&&d!==g.value)&&Yt(e,"value",d,g.value,!1),"checked"in v&&(d=v.checked)!==void 0&&d!==e.checked&&Yt(e,"checked",d,g.checked,!1))}return e}function Pe(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){p.__e(r,n)}}function we(e,t,n){var r,o;if(p.unmount&&p.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Pe(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){p.__e(i,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&we(r[o],t,n||typeof e.type!="function");n||e.__e==null||bn(e.__e),e.__=e.__e=e.__d=void 0}function _r(e,t,n){return this.constructor(e,n)}function dr(e,t,n){var r,o,i,s;p.__&&p.__(e,t),o=(r=typeof n=="function")?null:n&&n.__k||t.__k,i=[],s=[],Be(t,e=(!r&&n||t).__k=cr(x,null,[e]),o||at,at,t.ownerSVGElement!==void 0,!r&&n?[n]:o?null:t.firstChild?ee.call(t.childNodes):null,i,!r&&n?n:o?o.__e:t.firstChild,r,s),Cn(i,e,s)}ee=yn.slice,p={__e:function(e,t,n,r){for(var o,i,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,r||{}),s=o.__d),s)return o.__E=o}catch(l){e=l}throw e}},pn=0,gn=function(e){return e!=null&&e.constructor===void 0},Nt.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=z({},this.state),typeof e=="function"&&(e=e(z({},n),this.props)),e&&z(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Oe(this))},Nt.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Oe(this))},Nt.prototype.render=x,X=[],mn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ie=function(e,t){return e.__v.__b-t.__v.__b},Gt.__r=0;var Kt,E,de,je,Se=0,An=[],Ot=[],Ve=p.__b,Ge=p.__r,Ye=p.diffed,Ke=p.__c,Xe=p.unmount;function Nn(e,t){p.__h&&p.__h(E,e,Se||t),Se=0;var n=E.__H||(E.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Ot}),n.__[e]}function vr(e,t){var n=Nn(Kt++,3);!p.__s&&Mn(n.__H,t)&&(n.__=e,n.i=t,E.__H.__h.push(n))}function xn(e){return Se=5,ne(function(){return{current:e}},[])}function ne(e,t){var n=Nn(Kt++,7);return Mn(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function pr(){for(var e;e=An.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(qt),e.__H.__h.forEach(Fe),e.__H.__h=[]}catch(t){e.__H.__h=[],p.__e(t,e.__v)}}p.__b=function(e){E=null,Ve&&Ve(e)},p.__r=function(e){Ge&&Ge(e),Kt=0;var t=(E=e.__c).__H;t&&(de===E?(t.__h=[],E.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Ot,n.__N=n.i=void 0})):(t.__h.forEach(qt),t.__h.forEach(Fe),t.__h=[],Kt=0)),de=E},p.diffed=function(e){Ye&&Ye(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(An.push(t)!==1&&je===p.requestAnimationFrame||((je=p.requestAnimationFrame)||gr)(pr)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Ot&&(n.__=n.__V),n.i=void 0,n.__V=Ot})),de=E=null},p.__c=function(e,t){t.some(function(n){try{n.__h.forEach(qt),n.__h=n.__h.filter(function(r){return!r.__||Fe(r)})}catch(r){t.some(function(o){o.__h&&(o.__h=[])}),t=[],p.__e(r,n.__v)}}),Ke&&Ke(e,t)},p.unmount=function(e){Xe&&Xe(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{qt(r)}catch(o){t=o}}),n.__H=void 0,t&&p.__e(t,n.__v))};var Je=typeof requestAnimationFrame=="function";function gr(e){var t,n=function(){clearTimeout(r),Je&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Je&&(t=requestAnimationFrame(n))}function qt(e){var t=E,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),E=t}function Fe(e){var t=E;e.__c=e.__(),E=t}function Mn(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function re(){throw new Error("Cycle detected")}function De(){if(lt>1)lt--;else{for(var e,t=!1;xt!==void 0;){var n=xt;for(xt=void 0,Ce++;n!==void 0;){var r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&kn(n))try{n.c()}catch(o){t||(e=o,t=!0)}n=r}}if(Ce=0,lt--,t)throw e}}var C=void 0,xt=void 0,lt=0,Ce=0,Xt=0;function $n(e){if(C!==void 0){var t=e.n;if(t===void 0||t.t!==C)return t={i:0,S:e,p:C.s,n:void 0,t:C,e:void 0,x:void 0,r:t},C.s!==void 0&&(C.s.n=t),C.s=t,e.n=t,32&C.f&&e.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=C.s,t.n=void 0,C.s.n=t,C.s=t),t}}function T(e){this.v=e,this.i=0,this.n=void 0,this.t=void 0}T.prototype.h=function(){return!0};T.prototype.S=function(e){this.t!==e&&e.e===void 0&&(e.x=this.t,this.t!==void 0&&(this.t.e=e),this.t=e)};T.prototype.U=function(e){if(this.t!==void 0){var t=e.e,n=e.x;t!==void 0&&(t.x=n,e.e=void 0),n!==void 0&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n)}};T.prototype.subscribe=function(e){var t=this;return oe(function(){var n=t.value,r=32&this.f;this.f&=-33;try{e(n)}finally{this.f|=r}})};T.prototype.valueOf=function(){return this.value};T.prototype.toString=function(){return this.value+""};T.prototype.toJSON=function(){return this.value};T.prototype.peek=function(){return this.v};Object.defineProperty(T.prototype,"value",{get:function(){var e=$n(this);return e!==void 0&&(e.i=this.i),this.v},set:function(e){if(C instanceof W&&function(){throw new Error("Computed cannot have side-effects")}(),e!==this.v){Ce>100&&re(),this.v=e,this.i++,Xt++,lt++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{De()}}}});function Tn(e){return new T(e)}function kn(e){for(var t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function En(e){for(var t=e.s;t!==void 0;t=t.n){var n=t.S.n;if(n!==void 0&&(t.r=n),t.S.n=t,t.i=-1,t.n===void 0){e.s=t;break}}}function Bn(e){for(var t=e.s,n=void 0;t!==void 0;){var r=t.p;t.i===-1?(t.S.U(t),r!==void 0&&(r.n=t.n),t.n!==void 0&&(t.n.p=r)):n=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=r}e.s=n}function W(e){T.call(this,void 0),this.x=e,this.s=void 0,this.g=Xt-1,this.f=4}(W.prototype=new T).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===Xt))return!0;if(this.g=Xt,this.f|=1,this.i>0&&!kn(this))return this.f&=-2,!0;var e=C;try{En(this),C=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return C=e,Bn(this),this.f&=-2,!0};W.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}T.prototype.S.call(this,e)};W.prototype.U=function(e){if(this.t!==void 0&&(T.prototype.U.call(this,e),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}};W.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;e!==void 0;e=e.x)e.t.N()}};W.prototype.peek=function(){if(this.h()||re(),16&this.f)throw this.v;return this.v};Object.defineProperty(W.prototype,"value",{get:function(){1&this.f&&re();var e=$n(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}});function Pn(e){return new W(e)}function Dn(e){var t=e.u;if(e.u=void 0,typeof t=="function"){lt++;var n=C;C=void 0;try{t()}catch(r){throw e.f&=-2,e.f|=8,Re(e),r}finally{C=n,De()}}}function Re(e){for(var t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,Dn(e)}function mr(e){if(C!==this)throw new Error("Out-of-order effect");Bn(this),C=e,this.f&=-2,8&this.f&&Re(this),De()}function Et(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}Et.prototype.c=function(){var e=this.S();try{if(8&this.f||this.x===void 0)return;var t=this.x();typeof t=="function"&&(this.u=t)}finally{e()}};Et.prototype.S=function(){1&this.f&&re(),this.f|=1,this.f&=-9,Dn(this),En(this),lt++;var e=C;return C=this,mr.bind(this,e)};Et.prototype.N=function(){2&this.f||(this.f|=2,this.o=xt,xt=this)};Et.prototype.d=function(){this.f|=8,1&this.f||Re(this)};function oe(e){var t=new Et(e);try{t.c()}catch(n){throw t.d(),n}return t.d.bind(t)}var ie,ve;function ft(e,t){p[e]=t.bind(null,p[e]||function(){})}function Jt(e){ve&&ve(),ve=e&&e.S()}function Rn(e){var t=this,n=e.data,r=N(n);r.value=n;var o=ne(function(){for(var i=t.__v;i=i.__;)if(i.__c){i.__c.__$f|=4;break}return t.__$u.c=function(){var s;!gn(o.peek())&&((s=t.base)==null?void 0:s.nodeType)===3?t.base.data=o.peek():(t.__$f|=1,t.setState({}))},Pn(function(){var s=r.value.value;return s===0?0:s===!0?"":s||""})},[]);return o.value}Rn.displayName="_st";Object.defineProperties(T.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:Rn},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});ft("__b",function(e,t){if(typeof t.type=="string"){var n,r=t.props;for(var o in r)if(o!=="children"){var i=r[o];i instanceof T&&(n||(t.__np=n={}),n[o]=i,r[o]=i.peek())}}e(t)});ft("__r",function(e,t){Jt();var n,r=t.__c;r&&(r.__$f&=-2,(n=r.__$u)===void 0&&(r.__$u=n=function(o){var i;return oe(function(){i=this}),i.c=function(){r.__$f|=1,r.setState({})},i}())),ie=r,Jt(n),e(t)});ft("__e",function(e,t,n,r){Jt(),ie=void 0,e(t,n,r)});ft("diffed",function(e,t){Jt(),ie=void 0;var n;if(typeof t.type=="string"&&(n=t.__e)){var r=t.__np,o=t.props;if(r){var i=n.U;if(i)for(var s in i){var l=i[s];l!==void 0&&!(s in r)&&(l.d(),i[s]=void 0)}else n.U=i={};for(var c in r){var u=i[c],_=r[c];u===void 0?(u=yr(n,c,_,o),i[c]=u):u.o(_,o)}}}e(t)});function yr(e,t,n,r){var o=t in e&&e.ownerSVGElement===void 0,i=Tn(n);return{o:function(s,l){i.value=s,r=l},d:oe(function(){var s=i.value.value;r[t]!==s&&(r[t]=s,o?e[t]=s:s?e.setAttribute(t,s):e.removeAttribute(t))})}}ft("unmount",function(e,t){if(typeof t.type=="string"){var n=t.__e;if(n){var r=n.U;if(r){n.U=void 0;for(var o in r){var i=r[o];i&&i.d()}}}}else{var s=t.__c;if(s){var l=s.__$u;l&&(s.__$u=void 0,l.d())}}e(t)});ft("__h",function(e,t,n,r){(r<3||r===9)&&(t.__$f|=2),e(t,n,r)});Nt.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u;if(!(n&&n.s!==void 0||4&this.__$f)||3&this.__$f)return!0;for(var r in t)return!0;for(var o in e)if(o!=="__source"&&e[o]!==this.props[o])return!0;for(var i in this.props)if(!(i in e))return!0;return!1};function N(e){return ne(function(){return Tn(e)},[])}function Ae(e){var t=xn(e);return t.current=e,ie.__$f|=4,ne(function(){return Pn(function(){return t.current()})},[])}function J(e){var t=xn(e);t.current=e,vr(function(){return oe(function(){return t.current()})},[])}function br(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function B(e){if(this.size=e|0,this.size<=1||this.size&this.size-1)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=e<<1;for(var t=new Array(this.size*2),n=0;n<t.length;n+=2){const c=Math.PI*n/this.size;t[n]=Math.cos(c),t[n+1]=-Math.sin(c)}this.table=t;for(var r=0,o=1;this.size>o;o<<=1)r++;this._width=r%2===0?r-1:r,this._bitrev=new Array(1<<this._width);for(var i=0;i<this._bitrev.length;i++){this._bitrev[i]=0;for(var s=0;s<this._width;s+=2){var l=this._width-s-2;this._bitrev[i]|=(i>>>s&3)<<l}}this._out=null,this._data=null,this._inv=0}var Ir=B;B.prototype.fromComplexArray=function(t,n){for(var r=n||new Array(t.length>>>1),o=0;o<t.length;o+=2)r[o>>>1]=t[o];return r};B.prototype.createComplexArray=function(){const t=new Array(this._csize);for(var n=0;n<t.length;n++)t[n]=0;return t};B.prototype.toComplexArray=function(t,n){for(var r=n||this.createComplexArray(),o=0;o<r.length;o+=2)r[o]=t[o>>>1],r[o+1]=0;return r};B.prototype.completeSpectrum=function(t){for(var n=this._csize,r=n>>>1,o=2;o<r;o+=2)t[n-o]=t[o],t[n-o+1]=-t[o+1]};B.prototype.transform=function(t,n){if(t===n)throw new Error("Input and output buffers must be different");this._out=t,this._data=n,this._inv=0,this._transform4(),this._out=null,this._data=null};B.prototype.realTransform=function(t,n){if(t===n)throw new Error("Input and output buffers must be different");this._out=t,this._data=n,this._inv=0,this._realTransform4(),this._out=null,this._data=null};B.prototype.inverseTransform=function(t,n){if(t===n)throw new Error("Input and output buffers must be different");this._out=t,this._data=n,this._inv=1,this._transform4();for(var r=0;r<t.length;r++)t[r]/=this.size;this._out=null,this._data=null};B.prototype._transform4=function(){var t=this._out,n=this._csize,r=this._width,o=1<<r,i=n/o<<1,s,l,c=this._bitrev;if(i===4)for(s=0,l=0;s<n;s+=i,l++){const d=c[l];this._singleTransform2(s,d,o)}else for(s=0,l=0;s<n;s+=i,l++){const d=c[l];this._singleTransform4(s,d,o)}var u=this._inv?-1:1,_=this.table;for(o>>=2;o>=2;o>>=2){i=n/o<<1;var a=i>>>2;for(s=0;s<n;s+=i)for(var g=s+a,v=s,f=0;v<g;v+=2,f+=o){const d=v,I=d+a,m=I+a,y=m+a,F=t[d],w=t[d+1],b=t[I],$=t[I+1],M=t[m],k=t[m+1],A=t[y],D=t[y+1],L=F,j=w,V=_[f],G=u*_[f+1],Y=b*V-$*G,K=b*G+$*V,_t=_[2*f],dt=u*_[2*f+1],vt=M*_t-k*dt,pt=M*dt+k*_t,gt=_[3*f],mt=u*_[3*f+1],yt=A*gt-D*mt,bt=A*mt+D*gt,It=L+vt,rt=j+pt,ot=L-vt,wt=j-pt,St=Y+yt,it=K+bt,st=u*(Y-yt),Ft=u*(K-bt),Pt=It+St,se=rt+it,ae=It-St,le=rt-it,ce=ot+Ft,ue=wt-st,fe=ot-Ft,he=wt+st;t[d]=Pt,t[d+1]=se,t[I]=ce,t[I+1]=ue,t[m]=ae,t[m+1]=le,t[y]=fe,t[y+1]=he}}};B.prototype._singleTransform2=function(t,n,r){const o=this._out,i=this._data,s=i[n],l=i[n+1],c=i[n+r],u=i[n+r+1],_=s+c,a=l+u,g=s-c,v=l-u;o[t]=_,o[t+1]=a,o[t+2]=g,o[t+3]=v};B.prototype._singleTransform4=function(t,n,r){const o=this._out,i=this._data,s=this._inv?-1:1,l=r*2,c=r*3,u=i[n],_=i[n+1],a=i[n+r],g=i[n+r+1],v=i[n+l],f=i[n+l+1],d=i[n+c],I=i[n+c+1],m=u+v,y=_+f,F=u-v,w=_-f,b=a+d,$=g+I,M=s*(a-d),k=s*(g-I),A=m+b,D=y+$,L=F+k,j=w-M,V=m-b,G=y-$,Y=F-k,K=w+M;o[t]=A,o[t+1]=D,o[t+2]=L,o[t+3]=j,o[t+4]=V,o[t+5]=G,o[t+6]=Y,o[t+7]=K};B.prototype._realTransform4=function(){var t=this._out,n=this._csize,r=this._width,o=1<<r,i=n/o<<1,s,l,c=this._bitrev;if(i===4)for(s=0,l=0;s<n;s+=i,l++){const _e=c[l];this._singleRealTransform2(s,_e>>>1,o>>>1)}else for(s=0,l=0;s<n;s+=i,l++){const _e=c[l];this._singleRealTransform4(s,_e>>>1,o>>>1)}var u=this._inv?-1:1,_=this.table;for(o>>=2;o>=2;o>>=2){i=n/o<<1;var a=i>>>1,g=a>>>1,v=g>>>1;for(s=0;s<n;s+=i)for(var f=0,d=0;f<=v;f+=2,d+=o){var I=s+f,m=I+g,y=m+g,F=y+g,w=t[I],b=t[I+1],$=t[m],M=t[m+1],k=t[y],A=t[y+1],D=t[F],L=t[F+1],j=w,V=b,G=_[d],Y=u*_[d+1],K=$*G-M*Y,_t=$*Y+M*G,dt=_[2*d],vt=u*_[2*d+1],pt=k*dt-A*vt,gt=k*vt+A*dt,mt=_[3*d],yt=u*_[3*d+1],bt=D*mt-L*yt,It=D*yt+L*mt,rt=j+pt,ot=V+gt,wt=j-pt,St=V-gt,it=K+bt,st=_t+It,Ft=u*(K-bt),Pt=u*(_t-It),se=rt+it,ae=ot+st,le=wt+Pt,ce=St-Ft;if(t[I]=se,t[I+1]=ae,t[m]=le,t[m+1]=ce,f===0){var ue=rt-it,fe=ot-st;t[y]=ue,t[y+1]=fe;continue}if(f!==v){var he=wt,Kn=-St,Xn=rt,Jn=-ot,Qn=-u*Pt,Zn=-u*Ft,tr=-u*st,er=-u*it,nr=he+Qn,rr=Kn+Zn,or=Xn+er,ir=Jn-tr,He=s+g-f,Ue=s+a-f;t[He]=nr,t[He+1]=rr,t[Ue]=or,t[Ue+1]=ir}}}};B.prototype._singleRealTransform2=function(t,n,r){const o=this._out,i=this._data,s=i[n],l=i[n+r],c=s+l,u=s-l;o[t]=c,o[t+1]=0,o[t+2]=u,o[t+3]=0};B.prototype._singleRealTransform4=function(t,n,r){const o=this._out,i=this._data,s=this._inv?-1:1,l=r*2,c=r*3,u=i[n],_=i[n+r],a=i[n+l],g=i[n+c],v=u+a,f=u-a,d=_+g,I=s*(_-g),m=v+d,y=f,F=-I,w=v-d,b=f,$=I;o[t]=m,o[t+1]=0,o[t+2]=y,o[t+3]=F,o[t+4]=w,o[t+5]=0,o[t+6]=b,o[t+7]=$};const wr=br(Ir);class Mt{constructor(t,n){S(this,"_inputLength");S(this,"_fft");S(this,"_bufferSupplier");S(this,"_paddedInputBuffer");S(this,"_transformBuffer");S(this,"_inverseBuffer");if(t<1)throw new Error("Input length must be at least one");this._inputLength=t,this._fft=new wr(Cr(2*t)),this._bufferSupplier=n,this._paddedInputBuffer=this._bufferSupplier(this._fft.size),this._transformBuffer=this._bufferSupplier(2*this._fft.size),this._inverseBuffer=this._bufferSupplier(2*this._fft.size)}static forFloat32Array(t){return new Mt(t,n=>new Float32Array(n))}static forFloat64Array(t){return new Mt(t,n=>new Float64Array(n))}static forNumberArray(t){return new Mt(t,n=>Array(n))}get inputLength(){return this._inputLength}autocorrelate(t,n=this._bufferSupplier(t.length)){if(t.length!==this._inputLength)throw new Error(`Input must have length ${this._inputLength} but had length ${t.length}`);for(let o=0;o<t.length;o++)this._paddedInputBuffer[o]=t[o];for(let o=t.length;o<this._paddedInputBuffer.length;o++)this._paddedInputBuffer[o]=0;this._fft.realTransform(this._transformBuffer,this._paddedInputBuffer),this._fft.completeSpectrum(this._transformBuffer);const r=this._transformBuffer;for(let o=0;o<r.length;o+=2)r[o]=r[o]*r[o]+r[o+1]*r[o+1],r[o+1]=0;this._fft.inverseTransform(this._inverseBuffer,this._transformBuffer);for(let o=0;o<t.length;o++)n[o]=this._inverseBuffer[2*o];return n}}function Sr(e){const t=[];let n=!1,r=-1/0,o=-1;for(let i=1;i<e.length-1;i++)e[i-1]<=0&&e[i]>0?(n=!0,o=i,r=e[i]):e[i-1]>0&&e[i]<=0?(n=!1,o!==-1&&t.push(o)):n&&e[i]>r&&(r=e[i],o=i);return t}function Fr(e,t){const[n,r,o]=[e-1,e,e+1],[i,s,l]=[t[n],t[r],t[o]],c=i/2-s+l/2,u=-(i/2)*(r+o)+s*(n+o)-l/2*(n+r),_=i*r*o/2-s*n*o+l*n*r/2,a=-u/(2*c),g=c*a*a+u*a+_;return[a,g]}class $t{constructor(t,n){S(this,"_autocorrelator");S(this,"_nsdfBuffer");S(this,"_clarityThreshold",.9);this._autocorrelator=new Mt(t,n),this._nsdfBuffer=n(t)}static forFloat32Array(t){return new $t(t,n=>new Float32Array(n))}static forFloat64Array(t){return new $t(t,n=>new Float64Array(n))}static forNumberArray(t){return new $t(t,n=>Array(n))}get inputLength(){return this._autocorrelator.inputLength}findPitch(t,n){this._nsdf(t);const r=Sr(this._nsdfBuffer);if(r.length===0)return[0,0];const o=Math.max(...r.map(c=>this._nsdfBuffer[c])),i=r.find(c=>this._nsdfBuffer[c]>=this._clarityThreshold*o),[s,l]=Fr(i,this._nsdfBuffer);return[n/s,Math.min(l,1)]}_nsdf(t){this._autocorrelator.autocorrelate(t,this._nsdfBuffer);let n=2*this._nsdfBuffer[0],r;for(r=0;r<this._nsdfBuffer.length&&n>0;r++)this._nsdfBuffer[r]=2*this._nsdfBuffer[r]/n,n-=t[r]**2+t[t.length-r-1]**2;for(;r<this._nsdfBuffer.length;r++)this._nsdfBuffer[r]=0}}function Cr(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}class Ar{constructor(){S(this,"stream");S(this,"context");S(this,"source");S(this,"splitter");S(this,"analyserNode");S(this,"fftSize");S(this,"dataArray");S(this,"channelCount");S(this,"activeChannel");this.stream=null,this.context=null,this.source=null,this.splitter=null,this.analyserNode=null,this.fftSize=2048,this.dataArray=new Float32Array(this.fftSize),this.channelCount=0,this.activeChannel=-1}async setup(){try{if(this.stream=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),this.stream===null)throw new Error("No media stream");if(this.context=new AudioContext,this.source=this.context.createMediaStreamSource(this.stream),this.source===null)throw new Error("No media stream source");if(this.channelCount=this.source.channelCount,this.channelCount<=0)throw new Error("No audio channels");return this.splitter=this.context.createChannelSplitter(this.channelCount),this.source.connect(this.splitter),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=this.fftSize,this.setActiveChannel(0),Promise.resolve()}catch(t){return Promise.reject(t)}}isActive(){return this.stream!==null&&this.stream.active}getChannelCount(){return this.channelCount}getActiveChannel(){return this.activeChannel}setActiveChannel(t){if(t<0||t>=this.channelCount)throw new Error("Invalid channel");if(this.splitter===null)throw new Error("No splitter");if(this.analyserNode===null)throw new Error("No analyser node");t!==this.activeChannel&&(this.activeChannel!==-1&&this.analyserNode.disconnect(),this.activeChannel=t,this.splitter.connect(this.analyserNode,t,0))}getFFTSize(){return this.fftSize}getSampleRate(){if(this.context)return this.context.sampleRate;throw new Error("No audio context")}updateDataArray(){if(this.analyserNode)this.analyserNode.getFloatTimeDomainData(this.dataArray);else throw new Error("No AnalyserNode")}setDataArray(t){this.dataArray=new Float32Array(t)}getDataArray(){return this.dataArray}}class Nr{constructor(){S(this,"tones");S(this,"placeholder");S(this,"names");S(this,"sharpSymbol");S(this,"flatSymbol");S(this,"baseFreq");this.tones=12,this.placeholder="*",this.names="C*D*EF*G*A*B",this.sharpSymbol="#",this.flatSymbol="b",this.baseFreq=new Float32Array(this.tones),this.baseFreq.set([16.35,17.32,18.35,19.45,20.6,21.83,23.12,24.5,25.96,27.5,29.14,30.87])}testIndex(t){if(t<0||!Number.isInteger(t))throw new Error("Invalid index")}testName(t){if(!this.isNatural(t)&&!this.isSharp(t)&&!this.isFlat(t))throw new Error("Invalid note name, must be natural, sharp or flat with capital letter")}testOctave(t){if(t<0||!Number.isInteger(t))throw new Error("Invalid octave, must be positive integer")}testFreq(t){if(t<0)throw new Error("Invalid frequency, must be positive")}isSharp(t){return t.length===2&&t[0]!==this.placeholder&&t[1]===this.sharpSymbol&&this.names.indexOf(t[0])!==-1}isFlat(t){return t.length===2&&t[0]!==this.placeholder&&t[1]===this.flatSymbol&&this.names.indexOf(t[0])!==-1}isNatural(t){return t.length===1&&t[0]!==this.placeholder&&this.names.indexOf(t[0])!==-1}isEqual(t,n){return t&&n&&t.frequency===n.frequency}getIndex(t,n){this.testName(t),this.testOctave(n);const r=this.isSharp(t)?1:this.isFlat(t)?-1:0;return this.names.indexOf(t[0])+r+this.tones*n}getFreq(t,n){const r=this.getIndex(t,n);return this.baseFreq[r%this.tones]*Math.pow(2,n)}get(t,n){const r=this.getIndex(t,n);return{frequency:this.getFreq(t,n),name:t,octave:n,index:r}}getNameByIndex(t,n){this.testIndex(t);const r=this.names[t%this.tones];return n&&r===this.placeholder?this.names[(t+1)%this.tones]+this.flatSymbol:r===this.placeholder?this.names[(t-1)%this.tones]+this.sharpSymbol:r}getOctaveByIndex(t){return this.testIndex(t),Math.floor(t/this.tones)}getByIndex(t,n){const r=this.getNameByIndex(t,n),o=this.getOctaveByIndex(t);return{frequency:this.getFreq(r,o),name:r,octave:o,index:t}}getOctaveByFreq(t){return this.testFreq(t),Math.floor(Math.log2(t/this.baseFreq[0]))}getByFreq(t,n,r=0){const o=this.getOctaveByFreq(t);for(let i=0;i<this.baseFreq.length;i+=1){const s=this.baseFreq[i]*Math.pow(2,o),l=s-s*r,c=s+s*r;if(l<=t&&c>=t)return{frequency:s,name:this.getNameByIndex(i,n),octave:o,index:i+this.tones*o}}return null}getDifference(t,n){if(t&&n){const r=(t.index-n.index)/this.tones;return r>1?1:r<-1?-1:r}return 0}getInRange(t,n,r,o,i,s){const l=[],c=this.getIndex(t,n),u=this.getIndex(r,o);if(u<c)throw new Error("Invalid range");const _=u-c,a=_!==0?_:1;if(s=s||a,s<0||!Number.isInteger(s))throw new Error("Invalid total notes");const g=Math.ceil(s/a);for(let v=0;v<g;v+=1)for(let f=c;f<=u&&!(l.length>=s);f+=1){const d=this.getByIndex(f,i);l.push(d)}return l}getShuffledInRange(t,n,r,o,i,s){const l=this.getInRange(t,n,r,o,i,s);for(let c=l.length-1;c>0;c--){const u=Math.floor(Math.random()*(c+1));[l[c],l[u]]=[l[u],l[c]]}return l}getShuffledFretboard(t,n,r,o){const i=[];return t.forEach(s=>{const l=this.isFlat(s.note),c=this.getIndex(s.note,s.octave),u=this.getByIndex(c+n,l),_=this.getByIndex(c+r,l);i.push(this.getShuffledInRange(u.name,u.octave,_.name,_.octave,l,o))}),i}}const Hn=e=>{const t=["th","st","nd","rd"][e%10]||"th";return e+t+" String"},Un=e=>{const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n].octave;return t},zn=(e,t)=>{const n=Un(e);return Math.min(...n)+Math.floor(t/12)},On=(e,t)=>{const n=Un(e);return Math.max(...n)+Math.ceil(t/12)};var xr=0;function h(e,t,n,r,o,i){var s,l,c={};for(l in t)l=="ref"?s=t[l]:c[l]=t[l];var u={type:e,props:c,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--xr,__source:o,__self:i};if(typeof e=="function"&&(s=e.defaultProps))for(l in s)c[l]===void 0&&(c[l]=s[l]);return p.vnode&&p.vnode(u),u}const Mr=e=>{let t=0;const n=e.noteArray.map((r,o)=>{o%e.columns===0&&(t+=1);const i=e.index===o?"underline":"inherit",s=e.index===o?e.highlightColor:"inherit",l=r.name+r.octave;return h("div",{className:"node",style:{textDecoration:i,color:s,gridRow:t},children:l},o)});return h("div",{id:e.id,children:n})};function $r(e){const t=Hn(e.guitarString);return h(x,{children:h("section",{id:"note-grid-section",className:"section-large",children:[h("label",{id:"note-grid-label",children:t}),h(Mr,{id:"note-grid",noteArray:e.noteArray.value,index:e.index.value,columns:e.columns,highlightColor:e.highlightColor})]})})}const Tr="/assets/g-clef-c1cea658.svg",kr="/assets/c-clef-fcdac83a.svg",Er="/assets/f-clef-398f8465.svg",Br="/assets/sharp-0a8010b0.svg",Pr="/assets/flat-9771bd12.svg",Dr="/assets/quarter-note-stem-up-7f7d9684.svg",Rr="/assets/quarter-note-stem-down-6cf9d1aa.svg",P=e=>Math.floor(nt/ht*e),tt=e=>{const t=new Image;return t.src=e,t},et=e=>Math.floor(nt/ht*e*2),R=Math.floor(96*15),nt=Math.floor(28.5*15),Q=2,ht=38,O=ht/2,Z=O-6,Qt=O+2,Wt=4,qn=3,ct=Math.floor(R/ht*4.3),Zt=P(Z),Qe=P(Qt),H=Math.floor(nt/ht*2),Ze=P(Z-1)-Q,Ne=et(6),tn=Math.floor(Ne*.4),Hr=tt(Tr),en=P(Z-4),At=et(4),Dt=Math.floor(At*.75),nn=tt(kr),rn=P(Z)+Q,xe=et(3.25),on=Math.floor(xe*.9),Ur=tt(Er),zr=et(1.5),sn=Math.floor(nt/ht*2),Lt=et(1.5),Rt=Math.floor(Lt*.5),Or=tt(Br),qr=tt(Pr),Me=et(4),Ht=Math.floor(Me*.5),Wr=tt(Dr),Lr=tt(Rr),an=et(5);let pe=null,ge=null;const Wn=(e,t,n)=>{const r=Math.round(e.index*.5834)-26,o=e.name[1]==="#"?1:0,i=-r+o;return t==="treble"?i+O-1+7*(n-Wt+1):t==="alto"?i+O-7+7*(n-Wt+1):t==="baritone"?i+O-11+7*(n-Wt+1):i+O-13+7*(n-qn+1)},Tt=(e,t,n,r,o,i)=>{t=Math.floor(t),n=Math.floor(n),r=Math.floor(r),o=Math.floor(o),e.lineWidth=i,e.beginPath(),e.moveTo(t,n),e.lineTo(r,o),e.stroke()},q=(e,t,n,r,o,i)=>{n=Math.floor(n),r=Math.floor(r),e.drawImage(t,n,r,o,i),e.globalCompositeOperation="source-atop",e.fillRect(n,r,o,i),e.globalCompositeOperation="source-over"},jr=(e,t)=>{const n=Math.floor(t/4),r=Math.floor((R-ct)/t);for(let o=Z;o<=Qt;o+=2){const i=P(o);Tt(e,0,i,R,i,Q)}for(let o=0;o<2;o+=1){const i=Math.floor(R*o);Tt(e,i,Zt,i,Qe,Q*5)}for(let o=n-1;o>0;o-=1){const i=Math.floor(r*o*4+ct-r*.5);Tt(e,i,Zt,i,Qe,Q*2.5)}},Ut=(e,t,n,r,o)=>{const i=(Math.abs(7*t)+1).toString();t>0?(e.textBaseline="ideographic",e.fillText(i,Math.floor(n),Math.floor(r))):t<0&&(e.textBaseline="top",e.fillText(i,Math.floor(n),Math.floor(r+o)))},Vr=(e,t,n)=>{const r=n-(t==="bass"?qn:Wt);t==="treble"?(q(e,Hr,H,Ze,tn,Ne),Ut(e,r,H+tn*.64,Ze,Ne)):t==="alto"?(q(e,nn,H,Zt,Dt,At),Ut(e,r,H+Dt*.4,Zt,At)):t==="baritone"?(q(e,nn,H,en,Dt,At),Ut(e,r,H+Dt*.4,en,At)):(q(e,Ur,H,rn,on,xe),Ut(e,r,H+on*.4,rn,xe))},Gr=(e,t,n)=>{const r=t-sn,o=t+sn;if(n>Qt)for(let i=Qt+1;i<=n;i+=2){const s=P(i);Tt(e,r,s,o,s,Q)}else if(n<Z)for(let i=Z-1;i>=n;i-=2){const s=P(i);Tt(e,r,s,o,s,Q)}},Ln=(e,t,n)=>{if(n>O-2){const r=P(n-7);q(e,Wr,t-Ht*.5,r,Ht,Me)}else{const r=P(n-1);q(e,Lr,t-Ht*.5,r,Ht,Me)}},jn=(e,t,n,r)=>{const o=P(n-2);r.name[1]==="#"?q(e,Or,t-Rt*2,o+Lt*.2,Rt,Lt):r.name[1]==="b"&&q(e,qr,t-Rt*2,o,Rt,Lt)},Yr=(e,t,n,r)=>{e.clearRect(0,0,R,nt),jr(e,n),Vr(e,t,r)},Kr=(e,t,n,r,o,i)=>{const s=r+o>t.length?t.length:r+o;e.clearRect(0,0,R,nt);for(let l=r;l<s;l+=1){const c=t[l],u=Wn(c,n,i),_=(R-ct)/o*(l-r)+ct;Gr(e,_,u),Ln(e,_,u),jn(e,_,u,c)}},Xr=(e,t,n,r,o,i)=>{const s=t[r],l=Wn(s,n,i),c=(R-ct)/o*(r%o)+ct;if(pe&&ge){const u=Math.floor(R/o);e.clearRect(Math.floor(pe-u*.5),Math.floor(ge-an*.1),u,an)}Ln(e,c,l),jn(e,c,l,s),pe=c,ge=l>O-2?P(l-7):P(l-1)};function Jr(e){const t=[null,null,null],n=Hn(e.guitarString),r=Ae(()=>Math.floor(e.index.value/e.columns)*e.columns),o=Ae(()=>{const s=e.noteArray.value.reduce((c,u)=>c+u.index,0),l=Math.floor(s/e.noteArray.value.length);return e.clef==="treble"?Math.round((l-8)/12):e.clef==="alto"?Math.round(l/12):e.clef==="baritone"?Math.ceil(l/12):Math.ceil((l-6)/12)}),i=s=>{if(!s)return null;const l=s.getContext("2d");return l.fillStyle=e.color,l.strokeStyle=e.color,l.textAlign="center",s};return J(()=>{if(!t[0])return;const s=t[0].getContext("2d");s.font=`${zr}px monospace`,Yr(s,e.clef,e.columns,o.value)}),J(()=>{if(!t[1])return;const s=t[1].getContext("2d");Kr(s,e.noteArray.value,e.clef,r.value,e.columns,o.value)}),J(()=>{if(!t[2])return;const s=t[2].getContext("2d");s.fillStyle=e.highlightColor,Xr(s,e.noteArray.value,e.clef,e.index.value,e.columns,o.value)}),h(x,{children:h("section",{id:"note-staff-section",className:"section-large",children:[h("label",{id:"note-staff-label",children:n}),t.map((s,l)=>h("canvas",{className:"note-staff-canvas",ref:c=>t[l]=i(c),width:R,height:nt,style:{zIndex:l}},l))]})})}function Qr(e){const t=N(!0),n=e.currentNote.value,r=n!==null?n.name+n.octave:"?",o=Ae(()=>t.value===!1?"Current Note ▲":"Current Note ▼");return h("div",{id:"current-note-wrapper",children:[h("button",{id:"current-note-button",className:"button-normal",onClick:()=>t.value=!t.value,children:o}),h("section",{id:"current-note-section",hidden:t,children:r})]})}const ut=33*10,Bt=1.8*10,ln=Math.floor(ut*.01),Zr=Math.floor(Bt*.33),te=Math.floor(ut*.03),$e=Math.floor(Bt*.5),jt=Math.round(ut*.5);let me=null;const cn=(e,t)=>{e.fillRect(Math.ceil(t-ln*.75),0,ln,Zr)},Vn=(e,t,n,r)=>{e.beginPath(),e.moveTo(Math.floor(t-te*.5),n),e.lineTo(Math.floor(t+te*.5),n),e.lineTo(t,n+$e*r),e.fill()},to=e=>{e.clearRect(0,0,ut,Bt);const t=ut/24;for(let n=jt,r=jt;n>0;n-=t,r+=t)cn(e,n),cn(e,r);Vn(e,jt,0,1)},eo=(e,t)=>{me!==null&&e.clearRect(Math.floor(me-te*.5),$e,te,$e);const n=Math.floor(jt*(t+1));Vn(e,n,Bt,-1),me=n};function no(e){const t=[null,null],n=r=>{if(!r)return null;const o=r.getContext("2d");return o.fillStyle=e.color,o.strokeStyle=e.color,r};return J(()=>{if(!t[0])return;const r=t[0].getContext("2d");to(r)}),J(()=>{if(!t[1])return;const r=t[1].getContext("2d");eo(r,e.difference.value)}),h(x,{children:h("div",{id:"pitch-meter-wrapper",children:[h("label",{id:"pitch-meter-label",children:"Pitch Meter"}),t.map((r,o)=>h("canvas",{className:"pitch-meter-canvas",ref:i=>t[o]=n(i),width:ut,height:Bt,style:{zIndex:o}},o))]})})}const ro=.7,un=.99,oo=.01;function io(e){const t=r=>{const o=r.target;o.validity.valid&&o.value!==""?e.certaintyThreshold.value=parseFloat(o.value):o.value=un.toString()},n=r=>{r.key==="Enter"&&r.target.blur()};return h(x,{children:h("div",{id:"certainty-input-wrapper",children:[h("label",{className:"options-label",id:"certainty-input-label",children:"Pitch Certainty"}),h("input",{type:"number",id:"certainty-input",className:"options-input",min:ro,max:un,step:oo,value:e.certaintyThreshold,onChange:t,onKeyPress:n})]})})}function so(e){return h(x,{children:h("button",{id:"stop-button",className:"button-large",onClick:()=>{e.audioInputIsActive.value===!0&&(e.started.value=!e.started.value)},children:"stop"})})}const U=new Nr,fn=48,ao=12,lo=.03,Gn=125,co=1e3,uo=Math.floor(co/Gn);let ye=0,Ct=0,hn=null,be=!1,Yn="#6200EE",Te="#121212";window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(Yn="#BB86FC",Te="#e4e4e4");const fo=e=>{const t=h($r,{noteArray:e.noteArray,guitarString:e.guitarString,index:e.index,columns:e.columns,highlightColor:e.highlightColor}),n=h(Jr,{noteArray:e.noteArray,guitarString:e.guitarString,index:e.index,columns:e.columns,clef:e.clef,color:e.color,highlightColor:e.highlightColor});return e.clef==="scientific"?t:n};function ho(e){const t=e.started,n=e.audioInput,r=e.audioInputIsActive,o=e.pitchDetector,i=e.userInput.tuning,s=e.userInput.startFret,l=e.userInput.endFret,c=e.userInput.notesDisplayFormat,u=N(0),_=N(0),a=N(0),g=N(U.getShuffledFretboard(i,s,l,fn)),v=N(g.value[_.value]),f=N(null),d=N(.99);be=U.isFlat(i[0].note);const I=()=>{u.value+=1,u.value>=v.value.length-1&&(u.value=0,_.value+=1,_.value>=g.value.length&&(u.value=0,_.value=0,g.value=U.getShuffledFretboard(i,s,l,fn)),v.value=g.value[_.value],be=U.isFlat(i[_.value].note))},m=()=>{n.updateDataArray();const[y,F]=o.findPitch(n.getDataArray(),n.getSampleRate()),w=F>d.value?U.getByFreq(y,be,lo):null;U.isEqual(w,hn)?f.value=w:(ye+=1,ye>=uo&&(f.value=null,ye=0)),hn=w;const b=g.value[_.value][u.value];a.value=U.getDifference(f.value,b),U.isEqual(f.value,b)&&I()};return J(()=>(Ct===0&&(Ct=setInterval(()=>{r.value=n.isActive(),m()},Gn)),()=>{Ct!==0&&(clearInterval(Ct),Ct=0)})),h(x,{children:[h(Qr,{currentNote:f}),h("section",{id:"pitch-meter-and-certainty-section",className:"section-small",children:[h(no,{color:Te,difference:a}),h(io,{certaintyThreshold:d})]}),h(so,{started:t,audioInputIsActive:r}),h(fo,{noteArray:v,guitarString:g.value.length-_.value,index:u,columns:ao,clef:c,color:Te,highlightColor:Yn})]})}function _o(e){return e.started.value===!0&&e.pitchDetector!==null&&e.audioInputIsActive.value===!0?h(x,{children:h(ho,{audioInput:e.audioInput,userInput:e.userInput,pitchDetector:e.pitchDetector,started:e.started,audioInputIsActive:e.audioInputIsActive})}):null}const vo="^((?:C#|Db|D#|Eb|F#|Gb|G#|Ab|A#|Bb|[A-G])[0-5]-?)+$",po=e=>{const t=e.split("-"),n=[];for(const r of t){const o={note:r.substring(0,r.length-1),octave:parseInt(r.substring(r.length-1,r.length),10)};n.push(o)}return n},go=e=>{let t="";for(const n of e)t+=`${n.note}${n.octave}-`;return t=t.slice(0,-1),t};function mo(e){const t=N(e.userInput.tuning),n=N(go(e.userInput.tuning)),r=N(e.userInput.startFret),o=N(e.userInput.endFret),i=l=>{const c=l.target;c.validity.valid&&c.value!==""?(t.value=po(c.value),n.value=c.value,e.setUserInput({tuning:t.value,startOctave:zn(t.value,r.value),endOctave:On(t.value,o.value)})):c.value=n.value},s=l=>{l.key==="Enter"&&l.target.blur()};return h(x,{children:h("div",{id:"tuning-input-wrapper",children:[h("label",{className:"options-label",children:"Tuning"}),h("input",{id:"tuning-input",className:"options-input",type:"textfield",pattern:vo,value:n,onChange:i,onKeyPress:s})]})})}const _n=0,dn=24;function yo(e){const t=N(e.userInput.tuning),n=N(e.userInput.startFret),r=N(e.userInput.endFret),o=l=>{const c=l.target,u=parseInt(c.value,10);c.validity.valid&&c.value!==""?(u>r.value&&(r.value=u),n.value=u,e.setUserInput({startFret:u,startOctave:zn(t.value,u)})):c.value=n.value.toString()},i=l=>{const c=l.target,u=parseInt(c.value,10);c.validity.valid&&c.value!==""?(u<n.value&&(n.value=u),r.value=u,e.setUserInput({endFret:u,endOctave:On(t.value,u)})):c.value=r.value.toString()},s=l=>{l.key==="Enter"&&l.target.blur()};return h(x,{children:h("div",{id:"fret-range-input-wrapper",children:[h("label",{className:"options-label",children:"Fret Range"}),h("input",{id:"start-fret",className:"fret-range-input options-input",type:"number",min:_n,max:dn,value:n,onChange:o,onKeyPress:s}),h("input",{id:"end-fret",className:"fret-range-input options-input",type:"number",min:_n,max:dn,value:r,onChange:i,onKeyPress:s})]})})}function bo(e){const t=e.audioInput,n=t.getChannelCount(),r=N(t.getActiveChannel()),o=[];for(let s=0;s<n;s++)o.push(h("option",{value:s,children:s+1}));const i=s=>{const l=s.target,c=parseInt(l.value,10);r.value=c,t.setActiveChannel(c)};return h(x,{children:h("div",{id:"channel-select-wrapper",children:[h("label",{className:"options-label",children:"Input Channel"}),h("select",{id:"channel-select",className:"options-input",value:r,onChange:i,children:o})]})})}const Io=["scientific","treble","alto","baritone","bass"],wo=Io.map((e,t)=>h("option",{value:e,children:e},t));function So(e){const t=N(e.userInput.notesDisplayFormat),n=r=>{const o=r.target;e.setUserInput({notesDisplayFormat:o.value}),t.value=o.value};return h(x,{children:h("div",{id:"notes-display-format-select-wrapper",children:[h("label",{className:"options-label",children:"Note Display"}),h("select",{id:"notes-display-format-select",className:"options-input",value:t,onChange:n,children:wo})]})})}function Fo(e){return h(x,{children:h("button",{id:"start-button",className:"button-large",onClick:()=>{e.audioInputIsActive.value===!0&&(e.started.value=!e.started.value)},children:"start"})})}const vn=h("a",{id:"github-link",href:"https://github.com/vannrr/boardr#readme",children:"Project's Github"});function Co(e){const t=async()=>{await e.audioInput.setup(),e.audioInputIsActive.value=e.audioInput.isActive()};return h("section",{className:"options-section section-small",children:[h("label",{className:"options-label",children:"Please enable audio input to use this app."}),h("button",{className:"button-normal",onClick:t,children:"Enable"})]})}function Ao(e){return h("section",{className:"options-section section-small",children:[h(mo,{userInput:e.userInput,setUserInput:e.setUserInput}),h(So,{userInput:e.userInput,setUserInput:e.setUserInput}),h(yo,{userInput:e.userInput,setUserInput:e.setUserInput}),h(bo,{audioInput:e.audioInput})]})}function No(e){return e.started.value===!1&&e.audioInputIsActive.value===!0?h(x,{children:[h(Ao,{userInput:e.userInput,audioInput:e.audioInput,setUserInput:e.setUserInput}),h(Fo,{started:e.started,audioInputIsActive:e.audioInputIsActive}),vn]}):e.started.value===!1&&e.audioInputIsActive.value===!1?h(x,{children:[h(Co,{audioInput:e.audioInput,audioInputIsActive:e.audioInputIsActive}),vn]}):null}const ke={tuning:[{note:"E",octave:2},{note:"A",octave:2},{note:"D",octave:3},{note:"G",octave:3},{note:"B",octave:3},{note:"E",octave:4}],startFret:0,endFret:22,startOctave:2,endOctave:6,notesDisplayFormat:"scientific"},Vt=new Ar,xo=$t.forFloat32Array(Vt.getFFTSize()),Mo=e=>{for(const[t,n]of Object.entries(e))n!==void 0&&(ke[t]=n)};function $o(){const e=N(!1),t=N(Vt.isActive());return J(()=>{t.value===!1&&e.value===!0&&(e.value=!1)}),h(x,{children:[h(_o,{started:e,audioInput:Vt,userInput:ke,audioInputIsActive:t,pitchDetector:xo}),h(No,{started:e,audioInput:Vt,userInput:ke,audioInputIsActive:t,setUserInput:Mo})]})}dr(h($o,{}),document.getElementById("app"));
